<ng-container *ngIf="showSpinner; else signatureContent">
    <h2 id="title-instructions" nz-typography>
        Firmando el documento, aguarde por favor.
    </h2>
    <div class="spinner-container">
        <nz-spin nzSimple [nzSize]="'large'"></nz-spin>
    </div>

</ng-container>

<ng-template #signatureContent>
    <ng-container *ngIf="!signatureSuccess && !signatureError; else resultContent">
        <h2 *ngIf="!confirm" id="title-instructions" nz-typography>
            Coloque su firma y luego haga clic en aceptar
        </h2>
        <h2 *ngIf="confirm" id="title-instructions" nz-typography>
            Verifique que su firma es correcta. Luego haga clic en confirmar
        </h2>
        <canvas id="signatureCanvas" [ngClass]="{'red-border': confirm}"></canvas>
        <div *ngIf="!confirm" class="button-container">
            <button nz-button nzType="default" (click)="clearCanvas()">Borrar</button>
            <button nz-button nzType="primary" (click)="confirm = true">Aceptar</button>
        </div>
        <div *ngIf="confirm" class="button-container">
            <button nz-button nzType="default" (click)="previousStep()">Volver al paso anterior</button>
            <button nz-button class="green-button" (click)="SignOk()">Confirmar</button>
        </div>
    </ng-container>
</ng-template>

<ng-template #resultContent>
    <ng-container *ngIf="signatureSuccess">
        <h2 class="success-message" nz-typography>
            <i nz-icon nzType="check-circle" nzTheme="outline" style="font-size: 24px; color: #52c41a;"></i>
            El documento ha sido firmado exitosamente.
        </h2>
        <div style="text-align: center;">
            <button nz-button nzType="default" (click)="closeModal()">Continuar</button>
        </div>
    </ng-container>
    <ng-container *ngIf="signatureError">
        <h2 class="error-message" nz-typography>
            <i nz-icon nzType="close-circle" nzTheme="outline" style="font-size: 24px; color: #f5222d;"></i>
            Ha ocurrido un error al firmar el documento. Consulte con el administrador del sistema.
        </h2>
        <div style="text-align: center;">
            <button nz-button nzType="default" (click)="closeModal()">Continuar</button>
        </div>

    </ng-container>
</ng-template>