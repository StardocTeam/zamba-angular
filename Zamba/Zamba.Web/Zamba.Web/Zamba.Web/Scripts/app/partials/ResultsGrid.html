
<nav class="navbar navbar-expand-lg navbar-resultsGrid" style="margin-bottom:-10px !important ; border-radius:0px !important;" id="ToolbarResults">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" style="display:none">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="navbar-collapse" id="navbarSupportedContent" style="margin-bottom: 5px; margin-top: 0 !important;">
        <!--<label>Seleccion</label>-->
        <div class="form-inline toolbarKendoGrid">
            <div class="row">
                <div class="col-xs-12" style="padding-left: 5px; padding-right: 5px; margin-top: 1px">

                    <div class="form-inline" style="display: inline; ">

                        <md-icon class="material-icons z-material-icons-align" style="color:white;" ng-if="currentMode == 'MyTasks'">
                            view_list
                        </md-icon>
                        <button class="md-button md-ink-ripple alignTextIcon no-margin-no-padding" ng-if="currentMode == 'search'" title="Nueva busqueda" ng-click='GoBackToSearch();'>
                            <md-icon class="material-icons-outlined md-span ng-scope material-icons" style="color: white; margin-top: -4px !important;" role="img" aria-label="filter_alt">
                                arrow_back
                            </md-icon>
                        </button>
                        <span class="hidden-xs  toolbar-color-search" style="color: white; font-weight: 400; font-size: 15px; margin-top: 5px; padding: 6px;" ng-show="currentMode == 'search'">Resultados</span>


                        <button class="md-button md-ink-ripple alignTextIcon no-margin-no-padding" ng-if="currentMode == 'MyProcess'" ng-click="ToggleWFSideBar()" title="Procesos" id="btnOpenTreeview" ng-clock>
                            <md-icon class="material-icons-outlined md-span ng-scope material-icons" style="color:white;margin-right: 5px;margin-left: 12px !important;" role="img" aria-label="filter_alt">
                                menu_open
                            </md-icon>
                        </button>
                        <!--<md-button type="button" id="btnOpenTreeview" class="md-fab md-fab-white ActualizarResultados mdhover ToolbarKendoGridBtn" title="Procesos" ng-clock ng-if="currentMode == 'MyProcess'" ng-click="ToggleWFSideBar()" style="margin-right: 0px; ">
        <span class="material-icons md-span revertIcon" id="iconBtnOpenTreeview">
            menu_open
        </span>
    </md-button>-->

                        <div ng-show="currentMode == 'MyTasks'" style="display: inline; " id="AsignedTasksId">
                            <span class="button-checkbox" ng-show="ShowchkMyTasks == true">
                                <md-button class="md-btn md-raised md-btn-basic" id='ShowchkMyTasks' data-color="warning" ng-click='ResetFilters();ValidateCheckMyTasks(true);'><span class="fa fa-user"></span> <span class="hidden-xs">{{MyTasksText}}</span></md-button>

                                <input type='checkbox' id="chkMyTasks" class="form-check-input hidden" ng-init='checkStatus=true' ng-model='chkMyTasks' ng-click='ValidateCheckMyTasks(true);'>

                            </span>
                            <span class="button-checkbox" ng-show="ShowchkViewAllMy == true">
                                <md-button class="md-btn md-raised  md-btn-basic" id='ShowchkViewAllMy' type="button" data-color="warning" ng-click='ResetFilters();ValidateCheckAllMy(true);'><span class="fa fa-tasks"></span> <span class="hidden-xs">{{AllTasksText}}</span></md-button>
                                <input type='checkbox' id="chkViewAllMy" class="form-check-input hidden" ng-init='checkStatus=false' ng-model='chkViewAllMy' ng-click='ValidateCheckAllMy(true);'>

                            </span>

                            <span class="button-checkbox" ng-show="ShowchkMyAllTeam == true">
                                <md-button class="md-btn md-raised  md-btn-basic" id='ShowchkMyAllTeam' type="button" data-color="warning" ng-click='ResetFilters();ValidateCheckMyAllTeam(true);'><span class="fa fa-user"></span> <span class="fa fa-group"></span> <span class="hidden-xs">{{MyAllTeamTasksText}}</span></md-button>
                                <input type='checkbox' id="chkMyAllTeam" class="form-check-input hidden" ng-init='checkStatus=false' ng-model='chkMyAllTeam' ng-click='ValidateCheckMyAllTeam(true);'>
                            </span>

                            <span class="button-checkbox" ng-show="ShowchkMyTeam == true">
                                <md-button class="md-btn md-raised  md-btn-basic" id="ShowchkMyTeam" type="button" data-color="warning" ng-click='ResetFilters();ValidateCheckMyTeam(true);'><span class="fa fa-users"></span> <span class="hidden-xs">{{MyTeamTasksText}}</span></md-button>
                                <input type='checkbox' id="chkMyTeam" class="form-check-input hidden" ng-init='checkStatus=false' ng-model='chkMyTeam' ng-click='ValidateCheckMyTeam(true);'>
                            </span>


                        </div>

                        <span ng-if="Search.SearchResultsObject.views.length <= 3 && currentMode == 'MyTasks'">

                            <span ng-repeat="view in Search.SearchResultsObject.views" ng-init="$last ? updateCheckDisplay() : angular.noop()" ng-cloak>
                                <span class="button-checkbox-entities" ng-if="Search.AsignedTasks">
                                    <button type="button" class="btn btn-basic btn-sm btn-disabled" ng-class="view.viewClass" data-color="warning" style="padding: 4px 4px 4px 4px" ng-click="handleViewCheck(view)">
                                        {{view.name}} <!--({{view.ResultsCount}})-->
                                    </button>

                                    <input id="{{ 'chkv-' + view.id | toid }}" type='checkbox' class="form-check-input hidden" ng-click="handleViewCheck(view)" ng-init='checkStatus=false' ng-model="view.enabled"
                                           value=""
                                           ng-disabled="!view.enable">
                                </span>

                                st


                                <strong ng-if="!Search.AsignedTasks">Mostrando:</strong>

                                <span ng-if="!Search.AsignedTasks"> {{entity.name}} | </span>

                            </span>
                        </span>
                        <span ng-if="Search.SearchResultsObject.views.length > 4 && currentMode == 'MyTasks'">
                            <multiselect class="input-xlarge multiselect" ng-model="Search.SearchResultsObject.selectedView" options="view.id as view.name for view in Search.SearchResultsObject.views" select-limit="20"
                                         header="Seleciona una Vista" selected-header="vista: " multiple="false" required nombrefuncion="ViewUpdatDisplayJS"
                                         enable-filter="true" filter-placeholder="Buscar.." id="ViewSelect">
                            </multiselect>
                        </span>
                        <button class="md-button md-ink-ripple alignTextIcon no-margin-no-padding" ng-if="Search.DoctypesIds.length == 1" title="Mostrar filtros" ng-click='toogleFilterPanel()'>
                            <md-icon class="material-icons-outlined md-span ng-scope material-icons" style="color:white; margin-top: -4px !important" role="img" aria-label="filter_alt">
                                filter_alt
                            </md-icon>
                        </button>
                        <md-button id="CountFilter" class="md-btn md-raised md-warn" ng-if="Search.UsedZambafilters > 0 &&  Search.DoctypesIds.length == 1" ng-click='toogleFilterPanel()'>
                            <span>Filtros: {{Search.UsedZambafilters}}</span>
                        </md-button>

                        <md-button id="mdBtnFilterStep" class="md-btn md-raised md-btn-basic ToolbarKendoGridBtn" ng-if="selectedStepStateName != '' && currentMode == 'MyProcess'">
                            <i class="icon-task-header ToolbarGlyphicons glyphicon glyphicon-tasks hidden-md "></i>
                            <span id="TextFilterstep">
                                {{selectedStepStateName}}
                            </span>
                        </md-button>

                        <div id="searchinfo" style="display: inline;  color: white " ng-if="currentMode == 'MyTasks' || currentMode == 'Search' || currentMode == 'search'">
                            <span ng-repeat="entity in Search.SearchResultsObject.entities" ng-init="$last ? updateCheckDisplay() : angular.noop()" ng-cloak>

                                <span class="button-checkbox-entities" ng-if="Search.AsignedTasks && entity.ResultsCount > 0">
                                    <md-button type="button" class="md-btn md-raised " data-color="info"
                                               ng-click="handleEntityCheck(entity)">
                                        {{entity.name}}
                                        <span class="badge md-badge">{{entity.ResultsCount}}</span>
                                    </md-button>

                                    <input id="{{ 'chke-' + entity.name | toid }}" type='checkbox' class="form-check-input hidden"
                                           ng-click="handleEntityCheck(entity)" ng-init='checkStatus=true' ng-model="entity.enabled"
                                           ng-disabled="EntitiesCheckEnable">
                                </span>

                                <strong ng-if="currentMode == 'Search'">Mostrando:</strong>
                                <span ng-if="currentMode == 'Search' && entity.ResultsCount > 0"> {{entity.name}} | </span>
                            </span>
                        </div>
                        <div id="searchinfo" style="display: inline;  color: white " ng-if="currentMode == 'MyProcess'">
                            <span ng-repeat="entity in Search.SearchResultsObject.entities" ng-init="$last ? updateCheckDisplay() : angular.noop()" ng-cloak>

                                <span class="" ng-if="entity.ResultsCount > 0">
                                    <md-button type="button" class="md-btn md-raised md-btn-info active" data-color="info">
                                        {{entity.name}}
                                        <span class="badge md-badge">{{entity.ResultsCount}}</span>
                                    </md-button>

                                </span>
                            </span>
                        </div>



                        <!-- Nuevo panel de filtros -->
                        <div class="jumbotron filterPanelContainer" ng-show="filterPanelOpened && Search.DoctypesIds.length == 1" ng-controller="ZambaFiltersController">
                            <div>
                                <div class="row">
                                    <div class="col-sm-12 col-md-12">


                                        <div class="col-lg-2 col-md-12 btnflexpading">
                                            <button type="button" class=" btnborder btnFilterButtons" title="Asignado" ng-click='showFilterControl("Assigned")'>
                                                <md-icon class="material-icons md-span alignTextIcon" ng-class="{selectedIconColor: selectedFilterButton == 'Assigned'}">
                                                    person
                                                </md-icon>
                                            </button>
                                            <button ng-if="currentMode != 'MyProcess'" type="button" class=" btnborder btnFilterButtons" title="Etapas" ng-click='showFilterControl("Steps")'>
                                                <md-icon class="material-icons md-span alignTextIcon" ng-class="{selectedIconColor: selectedFilterButton == 'Steps'}">
                                                    menu_open
                                                </md-icon>
                                            </button>
                                            <button type="button" class=" btnborder btnFilterButtons" title="Atributos" ng-click='showFilterControl("Attributes")'>
                                                <md-icon class="material-icons md-span alignTextIcon" ng-class="{selectedIconColor: selectedFilterButton == 'Attributes'}">
                                                    edit_attributes
                                                </md-icon>
                                            </button>
                                            <button type="button" class=" btnborder btnFilterButtons" title="Otros filtros" ng-click='showFilterControl("Others")'>
                                                <md-icon class="material-symbols md-span alignTextIcon" ng-class="{selectedIconColor: selectedFilterButton == 'Others'}">
                                                    more_horiz
                                                </md-icon>
                                            </button>
                                        </div>
                                        <div class="col-lg-8 col-md-12">
                                            <!--USER ASSIGNED-->
                                            <div class="col-sm-12 col-md-12 margin-top-container-filter" ng-show="selectedFilterButton == 'Assigned'">
                                                <div class="filterControlContainer">
                                                    <!--USER ASSIGNED-->
                                                    <div class="" id="user-assigned-control">
                                                        <span id="ui-multiselect">
                                                            <input type="text" name="assignedlbl" id="assignedlblfilter" value="Asignado" class="form-control" readonly />
                                                            <ui-select ng-model="Search.UserAssignedId" style="display:inline;" on-select="AsignedSelected($item, $model)" theme="bootstrap" append-to-body>
                                                                <ui-select-match placeholder="Seleccione un Usuario o Grupo...">
                                                                    {{$select.selected.Name}}
                                                                </ui-select-match>

                                                                <ui-select-choices repeat="Asigned.ID as Asigned in (Search.SearchResultsObject.UsersAsigned | filter: $select.search)">
                                                                    <span ng-bind-html="Asigned.Name | highlight: $select.search"></span>
                                                                </ui-select-choices>

                                                            </ui-select>

                                                        </span>

                                                    </div>
                                                </div>
                                            </div>
                                            <!--ETAPAS-->
                                            <div class="col-sm-12 col-md-12 margin-top-container-filter" ng-show="selectedFilterButton == 'Steps'">
                                                <div class="filterControlContainer">

                                                    <div ng-if="currentMode != 'MyProcess'" id="step-control" >
                                                        <span id="ui-multiselect">
                                                            <input type="text" name="steplbl" id="steplblfilter" value="Etapa" class="form-control" readonly />
                                                            <ui-select ng-model="Search.StepId" style="display:inline;" on-select="StepFilterSelected($item, $model)" theme="bootstrap">
                                                                <ui-select-match placeholder="Seleccione una Etapa...">
                                                                    {{$select.selected.Name}}
                                                                </ui-select-match>
                                                                <ui-select-choices group-by="'WFName'" repeat="step.ID as step in (Search.SearchResultsObject.Steps | filter: $select.search)">
                                                                    <span ng-bind-html="step.Name | highlight: $select.search"></span>
                                                                </ui-select-choices>
                                                            </ui-select>

                                                        </span>

                                                    </div>

                                                </div>
                                            </div>
                                            <!--ATTRIBUTES-->
                                            <div class="col-sm-12 col-md-12 margin-top-container-filter" ng-show="selectedFilterButton == 'Attributes'">
                                                <div class="filterControlContainer">
                                                    <filters-grid></filters-grid>
                                                </div>
                                            </div>

                                            <!--OTHERS-->
                                            <div class="col-sm-12 col-md-12 margin-top-container-filter" ng-show="selectedFilterButton == 'Others'">
                                                <div class="filterControlContainer">
                                                    <zamba-filters id="zambaFilters"></zamba-filters>
                                                </div>
                                            </div>
                                        </div>



                                        <div class="col-lg-2 col-md-12 btnflexstyle btnflexpading" style="display:flex; flex-direction:row-reverse;">
                                            <button class="btnborder md-ink-ripple alignTextIcon" ng-click="clearAllFiltersInPanel();" type="button" ng-transclude="" title="Eliminar todos filtros" style="margin-right: 5px;">
                                                <md-icon class="material-icons-outlined md-span ng-scope" role="img" aria-label="filter_alt" style=" color: #ff5722">
                                                    delete
                                                </md-icon>
                                                <div class="md-ripple-container" style=""></div>
                                            </button>
                                            <button class=" btnborder md-ink-ripple alignTextIcon" ng-click="setDisabledCurrentFilters();" type="button" ng-transclude="" title="Deshabilitar todos los filtros">
                                                <md-icon class="material-icons-outlined md-span ng-scope" role="img" aria-label="filter_alt">
                                                    unpublished
                                                </md-icon>
                                                <div class="md-ripple-container" style=""></div>
                                            </button>
                                            <button class=" btnborder md-ink-ripple alignTextIcon" ng-click="setEnabledCurrentFilters();" type="button" ng-transclude="" title="Habilitar todos los filtros">
                                                <md-icon class="material-icons-outlined md-span ng-scope" role="img" aria-label="filter_alt" style="color: #337ab7;">
                                                    check_circle
                                                </md-icon>
                                                <div class="md-ripple-container" style=""></div>
                                            </button>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="items-filter-panel" class="flex-container">
                                <!--USER ASSIGNED-->
                                <div class="" id="user-assigned-control">
                                    <span id="ui-multiselect">
                                        <input type="text" name="assignedlbl" id="assignedlblfilter" value="Asignado" class="form-control" readonly />
                                        <ui-select ng-model="Search.UserAssignedId" style="display:inline;" on-select="AsignedSelected($item, $model)" theme="bootstrap" append-to-body ng-disabled="true">
                                            <ui-select-match placeholder="Seleccione un Usuario o Grupo...">
                                                {{$select.selected.Name}}
                                            </ui-select-match>

                                            <ui-select-choices repeat="Asigned.ID as Asigned in (Search.SearchResultsObject.UsersAsigned | filter: $select.search)">
                                                <span ng-bind-html="Asigned.Name | highlight: $select.search"></span>
                                            </ui-select-choices>

                                        </ui-select>

                                    </span>
                                    <div style="display:inline-block;">
                                        <input class="btn btn-default CurrentFilter" style="margin-bottom:11px !important;" type="checkbox" ng-model="Search.UserAssignedFilter.IsChecked" ng-change="changeEnableStateFilter(Search.UserAssignedFilter)" ng-disabled="Search.UserAssignedId == -1">
                                        <button class="md-button md-ink-ripple alignTextIcon" style="margin-bottom: 11px;" ng-click="ClearAsignedSelected(true);" type="button" ng-transclude="" id="btnclear">
                                            <md-icon class="material-icons-outlined md-span ng-scope material-icons" role="img" aria-label="filter_alt">
                                                delete
                                            </md-icon>
                                            <div class="md-ripple-container ng-scope" style=""></div>
                                        </button>
                                    </div>
                                </div>
                                <!--ETAPAS-->
                                <div ng-if="currentMode != 'MyProcess'" id="step-control">
                                    <span id="ui-multiselect">
                                        <input type="text" name="steplbl" id="steplblfilter" value="Etapa" class="form-control" readonly />
                                        <ui-select ng-model="Search.StepId" style="display:inline; overflow-x: clip" on-select="StepFilterSelected($item, $model)" theme="bootstrap" ng-disabled="true">
                                            <ui-select-match placeholder="Seleccione una Etapa...">
                                                {{$select.selected.Name}}
                                            </ui-select-match>
                                            <ui-select-choices group-by="'WFName'" repeat="step.ID as step in (Search.SearchResultsObject.Steps | filter: $select.search)">
                                                <span ng-bind-html="step.Name | highlight: $select.search"></span>
                                            </ui-select-choices>
                                        </ui-select>

                                    </span>
                                    <div style="display:inline-block;">
                                        <input class="btn btn-default CurrentFilter" style="margin-bottom:11px !important;" type="checkbox" ng-model="Search.StepFilter.IsChecked" ng-change="changeEnableStateFilter(Search.StepFilter)" ng-disabled="Search.StepId == 0">
                                        <button class="md-button md-ink-ripple alignTextIcon" ng-click="ClearStepFilterSelected(true);" type="button" ng-transclude="" id="btnclear" style="margin-bottom:11px !important;" ;
                                                }">
                                            <md-icon class="material-icons-outlined md-span ng-scope material-icons" role="img" aria-label="filter_alt">
                                                delete
                                            </md-icon>
                                            <div class="md-ripple-container ng-scope" style=""></div>
                                        </button>
                                    </div>
                                </div>
                                <!--iteracion por filtros de atributos-->
                                <div ng-repeat="usedfilter in Search.usedFilters" class="input-group-filter margin-top-created-filter mt-filter">
                                    <input class="form-control CurrentFilter form-control-filter otherFiltersTop" ng-attr-value="{{usedfilter.Name}}&nbsp;{{usedfilter.CompareOperator}}&nbsp;{{((usedfilter.dataDescription == undefined || usedfilter.dataDescription == '') ? usedfilter.Data : usedfilter.dataDescription)}}" ng-attr-title="{{usedfilter.IndexName}}&nbsp;{{usedfilter.CompareOperator}}&nbsp;{{((usedfilter.dataDescription == undefined || usedfilter.dataDescription == '') ? usedfilter.Data : usedfilter.dataDescription)}}" readonly />
                                    <input class="btn btn-default CurrentFilter  ng-pristine ng-valid ng-empty ng-touched" type="checkbox" ng-model="usedfilter.IsChecked" ng-change="changeEnableStateFilter(usedfilter)">
                                    <button class="md-button md-ink-ripple alignTextIcon deleteFilterClass" ng-click="DeleteFilter(usedfilter);" type="button" ng-transclude="" id="btnDeleteFilter" style="min-width: 0px;min-height: 0px; line-height:28px">
                                        <md-icon class="material-icons-outlined md-span ng-scope material-icons" role="img" aria-label="filter_alt">
                                            delete
                                        </md-icon>
                                        <div class="md-ripple-container ng-scope" style=""></div>
                                    </button>
                                </div>
                                <!--iteracion por OTROS FILTROS-->
                                <div ng-repeat="filter in zambaFiltersForDefaultColumns.nameFilters" class="input-group-filter margin-top-created-filter">
                                    <input class="form-control CurrentFilter form-control-filter otherFiltersTop" ng-attr-value="{{filter.Field}}&nbsp;{{filter.Operator}}&nbsp;{{filter.Value}}" readonly />
                                    <input class="btn btn-default CurrentFilter  ng-pristine ng-valid ng-empty ng-touched" type="checkbox" ng-model="filter.Enabled" ng-change="changeEnableState(filter)">

                                    <button class="md-button md-ink-ripple alignTextIcon deleteFilterClass" ng-click="removeDefaultZambaColumnFilter(filter,'nameFilters')" type="button" ng-transclude="" style="min-width: 0px;min-height: 0px;">
                                        <md-icon class="material-icons-outlined md-span ng-scope material-icons" role="img" aria-label="filter_alt">
                                            delete
                                        </md-icon>
                                        <div class="md-ripple-container ng-scope" style=""></div>
                                    </button>
                                </div>
                                <!--Filtros por nombre original del documento-->
                                <div ng-repeat="filter in zambaFiltersForDefaultColumns.originalFilenameFilters" class="input-group-filter margin-top-created-filter">
                                    <input class="form-control CurrentFilter form-control-filter otherFiltersTop" ng-attr-value="{{filter.Field}}&nbsp;{{filter.Operator}}&nbsp;{{filter.Value}}" readonly />
                                    <input class="btn btn-default CurrentFilter  ng-pristine ng-valid ng-empty ng-touched" type="checkbox" ng-model="filter.Enabled" ng-change="changeEnableState(filter)">

                                    <button class="md-button md-ink-ripple alignTextIcon deleteFilterClass" ng-click="removeDefaultZambaColumnFilter(filter,'originalFilenameFilters')" type="button" ng-transclude="" style="min-width: 0px;min-height: 0px;">
                                        <md-icon class="material-icons-outlined md-span ng-scope material-icons" role="img" aria-label="filter_alt">
                                            delete
                                        </md-icon>
                                        <div class="md-ripple-container ng-scope" style=""></div>
                                    </button>
                                </div>
                                <!--Filtros por estado de la tarea-->
                                <div ng-repeat="filter in zambaFiltersForDefaultColumns.stateFilters" class="input-group-filter margin-top-created-filter">
                                    <input class="form-control CurrentFilter form-control-filter otherFiltersTop" ng-attr-value="{{filter.Field}}&nbsp;{{filter.Operator}}&nbsp;{{filter.Value}}" readonly />
                                    <input class="btn btn-default CurrentFilter  ng-pristine ng-valid ng-empty ng-touched" type="checkbox" ng-model="filter.Enabled" ng-change="changeEnableState(filter)">

                                    <button class="md-button md-ink-ripple alignTextIcon deleteFilterClass" ng-click="removeDefaultZambaColumnFilter(filter,'stateFilters')" type="button" ng-transclude="" style="min-width: 0px;min-height: 0px;">
                                        <md-icon class="material-icons-outlined md-span ng-scope material-icons" role="img" aria-label="filter_alt">
                                            delete
                                        </md-icon>
                                        <div class="md-ripple-container ng-scope" style=""></div>
                                    </button>
                                </div>
                                <!--Filtros por fecha de creacion-->
                                <div ng-repeat="filter in zambaFiltersForDefaultColumns.crdateFilters" class="input-group-filter margin-top-created-filter">
                                    <input class="form-control CurrentFilter form-control-filter otherFiltersTop" ng-attr-value="{{filter.Field}}&nbsp;{{filter.Operator}}&nbsp;{{filter.Value}}" readonly />
                                    <input class="btn btn-default CurrentFilter  ng-pristine ng-valid ng-empty ng-touched" type="checkbox" ng-model="filter.Enabled" ng-change="changeEnableState(filter)">
                                    <button class="md-button md-ink-ripple alignTextIcon deleteFilterClass" ng-click="removeDefaultZambaColumnFilter(filter,'crdateFilters')" type="button" ng-transclude="" style="min-width: 0px;min-height: 0px;">
                                        <md-icon class="material-icons-outlined md-span ng-scope material-icons" role="img" aria-label="filter_alt">
                                            delete
                                        </md-icon>
                                        <div class="md-ripple-container ng-scope" style=""></div>
                                    </button>
                                </div>
                                <!--Filtros por fecha de actualizacion-->
                                <div ng-repeat="filter in zambaFiltersForDefaultColumns.lupdateFilters" class="input-group-filter margin-top-created-filter">
                                    <input class="form-control CurrentFilter form-control-filter otherFiltersTop" ng-attr-value="{{filter.Field}}&nbsp;{{filter.Operator}}&nbsp;{{filter.Value}}" readonly />
                                    <input class="btn btn-default CurrentFilter  ng-pristine ng-valid ng-empty ng-touched" type="checkbox" ng-model="filter.Enabled" ng-change="changeEnableState(filter)">
                                    <button class="md-button md-ink-ripple alignTextIcon deleteFilterClass" ng-click="removeDefaultZambaColumnFilter(filter,'lupdateFilters')" type="button" ng-transclude="" style="min-width: 0px;min-height: 0px;">
                                        <md-icon class="material-icons-outlined md-span ng-scope material-icons" role="img" aria-label="filter_alt">
                                            delete
                                        </md-icon>
                                        <div class="md-ripple-container ng-scope" style=""></div>
                                    </button>
                                </div>
                            </div>
                        </div>




                    </div>

                </div>
            </div>

        </div>
    </div>
</nav>

<nav id="resultsGridActions" class="navbar navbar-expand-lg navbar-resultsGridActions" style="margin-bottom:0px !important ;margin-top: 0; min-height: 30px ">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" style="display:none">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent" style="margin-top: 0px !important;">
        <!--<label>Seleccion</label>-->
        <form class="form-inline toolbarKendoGrid" id="KendoGridButtons">
            <div class="row">
                <div class="col-xs-12">

                    <div id="LblSwitchControl" style="display: inline; margin-left: -8px;">
                        <label class="switch" style="display:none">
                            <input type='checkbox' id="chkThumbGrid" ng-init='checkStatus=false;' ng-model='checkStatus' ng-click='MultipleSelection(!checkStatus)'>
                            <span class="slider round"></span>
                        </label>
                    </div>

                    <div id="Actions" class="md-label" style="display:none">
                        <!--<button type="button" class="BtnClearCheckbox btn btn-primary  btn-xs glyphicon glyphicon-unchecked" title="Reestablecer Seleccionados" ng-click="ClearSelectedChecksBox()" style="display:none !important;cursor:pointer;font-size:30px;border-radius:90%;position:relative;bottom:2px;margin-right:3px" id="BtnClearCheckbox"> </button>-->


                        <md-button type="button" class="buttonColor buttonTopAlign" title="Abrir Tareas" ng-click="OpenMultipleTask()" id="OpenAllSelected">
                            <span class="material-icons md-span ">
                                open_in_new
                            </span>
                        </md-button>

                        <md-button ng-if="ShowSendMailByResults" type="button" class="buttonColor buttonMargin buttonTopAlign" data-toggle="modal" title="Enviar Mail" data-target="#ModalSendZip" ng-click="GetMailUsers(); openModalSendMail" id="BtnSendEmail">
                            <span class="material-icons md-span">
                                email
                            </span>
                        </md-button>

                        <md-button ng-if="ShowSendMailByResults" type="button" class="buttonColor buttonMargin buttonTopAlign" data-toggle="modal" data-target="#ModalSendMailZip" title="Enviar ZIP" ng-click="GetMailUsers();" id="BtnSendZip">
                            <span class="material-icons md-span">
                                class
                            </span>
                        </md-button>

                        <md-button ng-if="ShowDownloadFileBtnPreview" type="button" class="buttonColor buttonMargin buttonTopAlign" ng-class="{'BtnZipDisable': BtnZipDisable}" title="Descargar ZIP" ng-click="DownLoadZip()" id="BtnDownloadZip">
                            <span class="material-icons md-span">
                                file_download
                            </span>
                        </md-button>

                        <div id="taskController" class="div" ng-controller="TaskController">

                            <md-button type="button" class="buttonColor buttonMargin buttonTopAlign" ng-click="ShowDeriveModal()" onclick="GetUsers1(); GetGroups1();" title="Derivar tareas" id="BtnDerivar">
                                <span class="material-icons md-span">
                                    person
                                </span>
                            </md-button>

                            <md-button type="button" ng-click="DocInfo()" class="buttonColor buttonMargin buttonTopAlign" title="Información de Documento" id="BtnDocInfo">
                                <span class="material-icons md-span">
                                    feed
                                </span>
                            </md-button>
                            <md-button ng-if="CanRemoveDocuments" ng-show="CanRemoveDocuments" type="button" class="buttonColor buttonMargin buttonTopAlign" ng-class="{'BtnZipDisable': BtnZipDisable}" title="Eliminar" ng-click="removeDocuments()" id="BtnRemoveDocuments">
                                <span class="material-icons md-span">
                                    delete
                                </span>
                            </md-button>
                            <ul id="panel_ruleActions" style="display: inline;">
                                <li ng-show="rules.length > 0" style="display: inline">
                                    <md-button id={{rule.ButtonId}} stepid="{{rule.StepId}}" href="#" ng-repeat="rule in rules" ng-click="executeAcctionGrid(rule)" class="btn btn-success actionRule" style="margin-right:10px; display:none">
                                        {{rule.Caption}}
                                    </md-button>
                                </li>

                                <li id="LiActions" ng-show="actionRules.length > 0" style="display: inline">
                                    <md-button id="BtnAcciones" onclick="OpenModalActionsRules();" class="actionRule" style="min-height: 11px; line-height: 26px; border-radius: 3px; margin-left: 3px">
                                        Acciones
                                    </md-button>
                                </li>
                            </ul>



                            <div class="modal fade" id="ModalActions" role="dialog" hidden="hidden">
                                <div class="modal-dialog" style="margin-top: 10%">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h4 id="LblActions" class="modal-title text-center">Acciones</h4>
                                        </div>

                                        <div>
                                            <ul>
                                                <li ng-repeat="ARule in actionRules" style="padding: 1px; list-style: none;">
                                                    <input type="submit" id="{{'UAB_Rule_' + ARule.ID}}"
                                                           ng-click="executeAcctionGrid(ARule)" value="{{ARule.Name}}"
                                                           class="wordwrap list-group-item list-group-item-action wordwrap GruposUsuarios"
                                                           style="max-width: 100%; width: 100%; word-wrap: break-word;" tabindex="-1" />
                                                </li>
                                            </ul>
                                        </div>






                                        <div class="modal-footer" >
                                            <button id="btnCloseModal" type="button" class="btn btn-primary closeModal" data-dismiss="modal">
                                                Cerrar
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                    <md-button type="button" class="buttonColor buttonTopAlign" ng-show="VisualizerMode == 'grid' && PreviewMode != 'noPreview'" ng-click="SaveTaskBeforeClosePreview();" title="Desactivar previsualizacion" id="BtnNoPreview">
                        <span class="material-icons md-span">
                            fullscreen
                        </span>
                    </md-button>

                    <!--<md-button type="button" class="buttonColor buttonMargin" ng-show="VisualizerMode == 'grid' && PreviewMode != 'previewV'" ng-click="TogglePreview('previewV');" title="Previsualizacion Vertical" id="BtnPreviewV">
        <span class="material-icons md-span">
            border_vertical
        </span>
    </md-button>-->

                    <md-button type="button" class="buttonColor buttonTopAlign" ng-show="VisualizerMode == 'grid' && PreviewMode != 'previewH'" ng-click="TogglePreview('previewH');" title="Previsualizacion Horizontal" id="BtnPreviewH">
                        <span class="material-icons md-span">
                            border_horizontal
                        </span>
                    </md-button>

                    <div id="VisualButtonsBar" style="text-align: right; float: right; margin-right: 5px;">
                        <div class="row">

                            <span id="md-span-white" class="hidden-xs hidden-sm">
                                <md-button class="Marginbutton2" ng-show="Search.SearchResultsObject.total > 0" type="button" id="BtnExportToExcel" data-toggle="modal" onclick="toogleMyModal()" title="Exportar a Excel" style="cursor: pointer; font-size: 30px; border: none; outline: none; margin-right: -10px;">
                                    <img src="../../Content/Images/icons/40.png" style="border:0"><img />
                                </md-button>
                            </span>

                            <md-button style="" id="btnRefreshGrid" type="button" class="buttonColor buttonTopAlign" onclick="RefreshCurrentResults()" title="Actualizar resultados">
                                <span class="material-icons md-span">
                                    autorenew
                                </span>
                            </md-button>

                            <span ng-if="Search.SearchResultsObject.total > 0 && Search.SearchResultsObject.total < 100" class="hidden-xs  hidden-sm">
                                {{Search.SearchResultsObject.total}} <span> resultados.  </span>
                            </span>
                            <span ng-if="Search.SearchResultsObject.total >= 100" class="hidden-xs  hidden-sm">
                                {{Search.SearchResultsObject.data.length}} resultados de {{Search.SearchResultsObject.total}} <span> </span>
                            </span>

                            <span ng-if="Search.SearchResultsObject.total > 0" class="hidden-xs  hidden-sm">
                                {{ShowExpirationDate != '' ? ('al ' + ShowExpirationDate) : ''}}
                            </span>

                            <span ng-if="Search.SearchResults == undefined || Search.SearchResults.length == 0" class="hidden-xs  hidden-sm">
                                No hay resultados.
                            </span>
                            <md-button name="dis" id="btnLoadMoreResultsGrid" class="md-btn md-raised  md-btn-green" style="text-align: center; margin-right: -2px !important;" ng-click="LoadMoreResults()" ng-show="Search.SearchResultsObject.total >= 100">
                                <div style="color: white">
                                    <p class="gsResultsCount">
                                        <span> mas resultados </span>
                                    </p>
                                </div>
                            </md-button>
                            <!--Previsualizar-->
                            <md-button id="" class="buttonColor">
                                <a ng-href="" id="" ng-click="visualizerModeGSFn(this,'preview');" title="Cambiar a modo Previsualizar" role="button" data-toggle="button" aria-pressed="false" style="color: var(--ZBlue); margin-top: 6px;">
                                    <span class="material-icons md-span">
                                        visibility
                                    </span>
                                </a>
                            </md-button>



                            <!--Thumbs-->
                            <md-button id="" class="buttonColor buttonMargin">
                                <a ng-href="" id="" ng-click="visualizerModeGSFn(this,'thumbs');" title="Cambiar a modo Iconos grandes" role="button" data-toggle="button" aria-pressed="false" style="color: var(--ZBlue); margin-top: 6px;">
                                    <span class="material-icons md-span">
                                        view_comfy
                                    </span>
                                </a>
                            </md-button>
                            <!--Lista-->
                            <!--<a ng-href="" id="visualizerModeGS" onclick="visualizerModeGSFn(this,'list');" title="Cambiar a modo Lista" role="button" data-toggle="button" aria-pressed="false" class="" style="color:white">
                <span class="remove-all-icon fa fa-th-list"> </span>
            </a>-->
                            <!--Grilla-->
                            <md-button id="" class="buttonColor buttonMargin">
                                <a ng-href="" id="" ng-click="visualizerModeGSFn(this,'grid');" title="Cambiar a modo Grilla" role="button" data-toggle="button" aria-pressed="false" style="color: var(--ZBlue); margin-top: 6px;">
                                    <span class="material-icons md-span">
                                        view_list
                                    </span>
                                </a>
                            </md-button>
                            <!-- Trigger the modal with a button -->
                            <!--<md-button type="button" class="md-fab md-fab-white" title="Manual de usuario" onclick="OpenHelp('../../forms/marsh/manuales/Manual_de_Usuario_Zamba_Web.pdf', 'Mis Tareas');">
                <span class="material-icons md-span">
                    help_outline
                </span>
            </md-button>-->
                        </div>
                        <!--<div class="row">

        </div>-->


                    </div>
                </div>
            </div>
        </form>
    </div>
</nav>


<!--Grilla-->
<div layout="{{LayoutPreview}}" id="resultsGridSearchGrid" style="display:none">

    <div flex="" id="Kgrid"></div>

    <div flex="" id="Preview" ng-show="PreviewMode != 'noPreview'">
        <div layout="column">
            <div flex="100">
                <button class="IFFLoatOpenBtn" ng-click="ScopeOpenTaskOnBrowser()" title="Abrir tarea">
                    <span class="material-icons md-span ng-scope md-span-IFFLoatOpenBtn" style="margin-top: 6px !important;">
                        launch
                    </span>
                </button>
                <iframe ng-show="!currentPreviewInTab" id="IFPreview" src="" height="100%" width="100%" allow="fullscreen"></iframe>

                <iframe ng-show="currentPreviewInTab" id="IFThisTaskIsOpen" src="" height="100%" width="100%"></iframe>
            </div>

            <!--<div flex="100">
                <img id="IFPreviewTEST" src="../../Content/openedTask.png" height="100%" width="100%" allow="fullscreen" />
            </div>-->

        </div>
    </div>
</div>

<div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header bg-primary">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title text-center">Cantidad de registros a exportar</h4>
            </div>
            <form>
                <div class="modal-body">
                    <p>Elija una opción:</p>
                    <div class="radio">
                        <label><input type="radio" name="optradio" checked onchange="disableQuantityField()">Todos</label>
                    </div>
                    <div class="radio">
                        <label><input type="radio" name="optradio" id="radio-elegircantidad" onchange="enableQuantityField()">Elegir cantidad</label><input type="number" class="form-control" placeholder="Cantidad" aria-describedby="basic-addon1" id="quantityToExport" style="display:none" />
                    </div>

                    <p><strong><i>El tiempo de exportación dependerá de la cantidad de resultados existentes. De existir varios resultados podría demorar varios minutos o incluso cancelarse la exportación.</i></strong></p>
                </div>
                <div class="alert alert-danger" id="errorMessageModalExcelExport" style="display:none">
                    <strong>Error!</strong> Ingrese un valor numérico y vuelva a intentarlo.
                </div>
                <div class="modal-footer">
                    <div id="spinnerExportExcel" style="margin-right:20px;display:none">
                        <i class="fa fa-circle-o-notch fa-spin fa-2x fa-fw"></i>
                        <span class="sr-only">Loading...</span>
                    </div>
                    <!--<button type="button" class="btn btn-default" data-dismiss="modal">Exportar</button>-->
                    <button type="button" class="btn btn-default" onclick="executeExportToExcelBySelectedOption()" id="btnExportar">Exportar</button>
                </div>
            </form>
        </div>

    </div>
</div>

<div class="modal fade" id="informationModal" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header bg-primary">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title text-center">Información de Documento</h4>
            </div>
            <div class="modal-body divModalInformation">
                <p><STRONG>DocID:</STRONG> {{DocInfoDocId}}</p>
                <p><STRONG>Entidad:</STRONG>  {{DocInfoEntidad}}</p>
                <p><STRONG>ID Entidad:</STRONG> {{DocInfoDocTypeID}}</p>
                <p><STRONG>Fecha Creación:</STRONG> {{DocInfoCreado}}</p>
                <p><STRONG>Tarea:</STRONG> {{DocInfoTarea}}</p>
            </div>
        </div>

    </div>
</div>

<div ng-controller="EmailController">



    <div id="ModalSendZip" class="modal fade" role="dialog" onclick="hideEmailList(event)">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content" style="width: 800px;">
                <form name="formMail" ng-submit="SendEmail(inputs)" id="EmailController">
                    <div class="modal-body">

                        <div class="form-group modalControl row" ng-controller="AutoCompleteController">
                            <label class="col-sm-1 control-label sendEmailMt">Para</label>
                            <div class="col-sm-11">

                                <zamba-auto-complete attribute="Para" name="formMailDestinatario" id="formMailDestinatario"></zamba-auto-complete>
                                <!--<input class="form-control input-sm EmailInput" name="for" placeholder="Para" ng-model="inputs.for" id="destinatario" />-->

                            </div>
                        </div>

                        <div class="form-group modalControl row" ng-controller="AutoCompleteController">
                            <label class="col-sm-1 control-label sendEmailMt">CC</label>
                            <div class="col-sm-11">

                                <zamba-auto-complete attribute="Cc" name="formMailCc" id="formMailCc"></zamba-auto-complete>
                                <!-- <input class="form-control input-sm EmailInput" name="cc" placeholder="CC" ng-model="inputs.cc" id="cc" /> -->

                            </div>
                        </div>

                        <div class="form-group modalControl row" ng-controller="AutoCompleteController">
                            <label class="col-sm-1 control-label sendEmailMt">CCO</label>
                            <div class="col-sm-11">

                                <zamba-auto-complete attribute="Cco" name="formMailCco" id="formMailCco"></zamba-auto-complete>
                                <!-- <input class="form-control input-sm EmailInput" name="cco" placeholder="CCO" ng-model="inputs.cco" id="cco" /> -->

                            </div>
                        </div>

                        <div class="form-group modalControl row">
                            <label class="col-sm-1 control-label sendEmailMt">Asunto</label>
                            <div class="col-sm-11">
                                <input class="form-control input-sm EmailInput" name="subject" autocomplete="off" placeholder="Asunto" ng-model="inputs.subject" id="subject" />
                            </div>
                        </div>


                        <div id="hidePanel" style="height: 245px; width: 768px; position: absolute; display:none" onclick="hideEmailList(event)"></div>
                        <div class="form-group modalControl">
                        <!--<textarea id="editor" name="messageBody" style="width: 100%; height: 100px; resize: none; border: 1px solid #ccc !important; border-radius: 3px;" rows="10" cols="80"></textarea>-->
                            <textarea id="cuerpoMensaje" ng-model="inputs.MessageBody" name="cuerpoMensaje" style="width:100%; height:100px; resize none; border: 1px solid #ccc !important; border-radius: 3px;" rows="10" cols="80"></textarea>
                        </div>

                        <div class="form-group addLinkMarginBottom">
                            <div class="col-sm-9">
                                <input id="addListLinks" type="checkbox" name="addListLinks" ng-model="inputs.addListLinks" style="margin-right: 6px"><label id="LabelAddListLinks"> Agregar link a documento</label>
                            </div>

                            <div class="modal-footer col-sm-3" align="right" style="border-top: none; padding-bottom: 8px; margin-top: 4px;">
                                <span class="loadersmall" style="display: none"></span>
                                <input id="btnMailZipSubmit" class="btn btn btn-default" type="submit" value="Enviar" style="background-color: rgb(66, 189, 62); color: white;">
                                <button id="btnMailZipMailClose" type="button" class="btn btn-default cancelMailZipButton" data-dismiss="modal" style="background-color: var(--ZBlue); color: white">
                                    Cerrar
                                </button>
                            </div>
                        </div>

                        <div class="form-group row dropZoneMarginTop">
                            <div id="DropZone" class="upload-container">
                                <input type="file" id="file_upload" multiple />
                            </div>
                        </div>

                    </div>
                </form>
            </div>

        </div>
    </div>

    <!-- Envio de zip -->
    <div id="ModalSendMailZip" class="modal fade" role="dialog" onclick="hideEmailList(event)">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <form name="formZip" ng-submit="SendZip(zipInputs)" autocomplete="off">
                    <div class="modal-body">

                        <div class="form-group modalControl row" ng-controller="AutoCompleteController">
                            <label class="col-sm-1 control-label">Para</label>
                            <div class="col-sm-11">
                            <input class="form-control input-sm zipinput" name="destinatario" placeholder="Para" ng-model="zipInputs.for" id="destinatario" />

                                <zamba-auto-complete attribute="Para_ZIP" name="formMailZipMailTo" id="formMailZipMailTo"></zamba-auto-complete>
                                <!--<input class="form-control input-sm EmailInput" name="for" placeholder="Para" ng-model="inputs.for" id="destinatario" />-->

                            </div>
                        </div>
                    </div>

                        <div class="form-group modalControl row" ng-controller="AutoCompleteController">
                            <label class="col-sm-1 control-label">CC</label>
                            <div class="col-sm-11">

                                <zamba-auto-complete attribute="Cc_ZIP" name="formMailZipCc" id="formMailZipCc"></zamba-auto-complete>
                                <!-- <input class="form-control input-sm EmailInput" name="cc" placeholder="CC" ng-model="inputs.cc" id="cc" /> -->

                            </div>
                        </div>

                        <div class="form-group modalControl row" ng-controller="AutoCompleteController">
                            <label class="col-sm-1 control-label">CCO</label>
                            <div class="col-sm-11">

                                <zamba-auto-complete attribute="Cco_ZIP" name="formMailZipCco" id="formMailZipCco"></zamba-auto-complete>
                                <!-- <input class="form-control input-sm EmailInput" name="cco" placeholder="CCO" ng-model="inputs.cco" id="cco" /> -->

                            </div>
                        </div>

                        <div class="form-group modalControl row">
                            <label class="col-sm-1 control-label">Asunto</label>
                            <div class="col-sm-11">
                                <input class="form-control input-sm zipinput" name="subject" placeholder="Asunto" ng-model="zipInputs.subject" id="subject" />
                            </div>
                        </div>

                        <div class="form-group modalControl row">

                            <div class="col-sm-6">
                                <label class="control-label">Nombre ZIP (Opcional)</label>
                                <input class="form-control" type="text" readonly onfocus="$(this).removeAttr('readonly');" input-sm zipinput" placeholder="Archivo" autocomplete="off" ng-model="zipInputs.zipName" />
                            </div>


                            <div class="col-sm-6">

                                <div class="col-sm-12">
                                    <label class="col-sm-10 control-label" style=" padding-left: 0px;">Contraseña</label>

                                    <div class="col-sm-2" align="right">
                                        <span class="input-group-text">
                                            <i class="fa fa-eye" aria-hidden="true" id="togglePassword" onclick="togglePasswordVisibility()"></i>
                                        </span>
                                    </div>
                                </div>

                                <div class="col-12">
                                    <input id="TxtPassword" type="text" readonly onfocus="$(this).removeAttr('readonly');" placeholder="Contraseña" class="col-sm-12 form-control input-sm zipinput ng-pristine ng-untouched ng-valid ng-empty" style="width: 96%; display:inline-block" ng-model="zipInputs.zipPasswd" aria-invalid="false" autocomplete="off">
                                </div>
                            </div>
                        </div>

                        <div id="hidePanelZip" style="height: 245px; width: 768px; position: absolute; display:none" onclick="hideEmailList(event)"></div>
                        <div class="form-group modalControl">
                            <textarea id="cuerpoMensajeZip" ng-model="zipInputs.MessageBody" name="cuerpoMensajeZip" style="width:100%; height:100px; resize none; border: 1px solid #ccc !important; border-radius: 3px;" rows="10" cols="80"></textarea>
                        </div>

                        <div class="form-group modalControl row addLinkMarginBottom">
                            <div class="modal-footer col-sm-12" align="right" style="border-top: none; padding-bottom: 5px;">
                                <span class="loadersmall" style="display: none"></span>
                                <input id="btnZipMailSubmit" class="btn btn btn-default" type="submit" value="Enviar" style="background-color: rgb(66, 189, 62); color: white;">
                                <button id="btnZipMailClose" type="button" class="btn btn-default cancelMailZipButton" data-dismiss="modal" style="background-color: var(--ZBlue); color: white" >Cerrar</button>
                            </div>
                        </div>
                    </div>


                    <style>
                        @media (max-width: 1200px) {
                            .btnflexstyle {
                                float: right;
                                align-items: flex-start;
                                display: flex;
                                justify-content: flex-end;
                                /* justify-items: stretch; */
                                margin-top: -5em;
                            }
                        }

                        .otherFiltersTop {
                            margin-top: 0px !important;
                        }

                        .btnflexpading {
                            padding-top: 4px;
                        }

                        #btnAddIndexFilter {
                            height: 33px !important;
                        }

                        .deleteFilterClass {
                            margin: 0px 11px 0px 0px !important;
                            padding: 0px !important;
                            display: inline-block;
                            width: 20px !important;
                            min-width: 20px !important;
                        }

                        .filterPanelContainer {
                            scrollbar-width: auto !important;
                            scrollbar-color: #10518e #ffffff !important;
                            margin-bottom: 0px !important;
                            padding: 1px !important
                        }

                            /* Chrome, Edge, and Safari */
                            .filterPanelContainer ::-webkit-scrollbar {
                                width: 13px !important;
                            }

                            .filterPanelContainer ::-webkit-scrollbar-track {
                                background: #ffffff !important;
                                -webkit-box-shadow: inset 0 0 6px #fafafa
                            }

                            .filterPanelContainer ::-webkit-scrollbar-thumb {
                                background-color: #337ab7 !important;
                                border-radius: 10px !important;
                                border: 6px solid #ffffff !important;
                                width: 6px !important;
                            }

                        .margin-input {
                            display: inline-block !important;
                            margin-left: 3px !important;
                            margin-right: 0px;
                        }

                        .revertIcon {
                            transform: scaleX(-1);
                            -moz-transform: scaleX(-1);
                            -webkit-transform: scaleX(-1);
                            -ms-transform: scaleX(-1);
                        }

                        .loader {
                            border: 9px solid #f3f3f3;
                            border-radius: 50%;
                            border-top: 9px solid #3498db;
                            width: 90px;
                            height: 90px;
                            animation: spin 2s linear infinite;
                            margin-left: 40%;
                        }

                        .liButtons {
                            margin: 0;
                            padding: 0;
                            margin-top: 5px;
                            height: 25px;
                        }

                        .liButtons2 {
                            margin: 0 !important;
                            padding: 0 !important;
                            margin-top: 15px !important;
                            margin-left: 12px !important;
                            /*height: 30px;*/
                        }

                        .navbar-text {
                            margin: 0px 5px 0px 5px;
                        }

                        .boldFont {
                            font-weight: bold;
                        }

                        .checkOptions {
                            margin-left: 5px;
                            padding-left: 5px;
                        }

                        #mnuOptions {
                            width: 240px;
                        }

                        .navbar-task li button {
                            margin-right: 2px;
                        }

                        .taskMessage {
                            color: red;
                            margin-left: 20px;
                            font-size: 14px;
                        }

                        .GruposUsuarios:hover {
                            z-index: 2 !important;
                            color: #fff !important;
                            background-color: #337ab7 !important;
                            border-color: #337ab7 !important;
                        }

                        .TamaDiv {
                            /*width: 572px !important;*/
                            height: 310px;
                            float: inherit !important;
                        }

                        .ScrollDiv {
                            overflow: auto;
                            height: 206px !important;
                        }

                        .selectedUser {
                            color: #fff !important;
                            background-color: #337ab7 !important;
                            border-color: #337ab7 !important;
                        }

                        .Marginbutton {
                            /*margin-top: 12px;*/
                        }


                        .Marginbtn {
                            margin-top: 2px;
                        }

                        .MarginDiv {
                            /*margin-bottom: 5px;*/
                        }

                        .stylebtn {
                            /*margin-top: 12px;*/
                        }

                        .MrgBtn {
                            margin-left: 5px;
                            margin-right: 5px;
                        }

                        .StyCalendar {
                            width: 91px;
                        }

                        .MarginIco {
                            margin-left: 9px;
                        }

                        .colorT {
                            color: #777 !important;
                        }

                        .recorte {
                            max-width: 150px;
                            overflow: hidden;
                            white-space: nowrap;
                            text-overflow: ellipsis;
                        }

                        .ColorIconModal:hover {
                            background: red;
                            padding: 6px;
                        }

                        .fa.fa-eye {
                            font-size: x-large;
                            cursor: pointer;
                            vertical-align: middle;
                        }

                        .ToolbarKendoGridBtn {
                            display: none !important;
                        }

                        /* Chrome, Edge, and Safari */
                        *::-webkit-scrollbar {
                            width: 10px;
                            height: 10px;
                        }

                        *::-webkit-scrollbar-track {
                            background: #ffffff;
                        }

                        *::-webkit-scrollbar-thumb {
                            background-color: #337ab7;
                            border-radius: 5px;
                            border: 0px solid #ffffff;
                        }

                        /*DropZone*/

                        .upload-container {
                        }


                            .upload-container input {
                                border: 1px solid #92b0b3;
                                background: #f1f1f1;
                                outline: 2px dashed #92b0b3;
                                outline-offset: -10px;
                                padding: 100px 0px 100px 250px;
                                text-align: center !important;
                                width: 500px;
                            }

                                .upload-container input:hover {
                                    background: #ddd;
                                }

                            .upload-container:before {
                                position: absolute;
                                bottom: 50px;
                                left: 245px;
                                color: #3f8188;
                                font-weight: 900;
                            }

                        .upload-btn {
                            margin-left: 300px;
                            padding: 7px 20px;
                        }

                        #file_upload {
                            width: 96%;
                            padding: 50px 25%;
                            margin-left: 15px;
                            border-color: rgb(207, 213, 255);
                        }

                        .modalControl {
                            margin-bottom: 5px !important;
                        }

                        .addLinkMarginBottom {
                            margin-bottom: 0px !important;
                        }

                        .dropZoneMarginTop {
                            margin-top: 5px !important;
                            margin-bottom: 0px !important;
                        }
                        /*DropZone*/

                        /* control AutoComplete */
                        .autocomplete {
                            position: relative;
                            display: inline-block;
                        }

                        input[type=text] {
                            background-color: #f1f1f1;
                            width: 100%;
                        }

                        input[type=submit] {
                            background-color: DodgerBlue;
                            color: #fff;
                            cursor: pointer;
                        }

                        .autocomplete-items {
                            position: absolute;
                            border: 1px solid #d4d4d4;
                            border-bottom: none;
                            border-top: none;
                            z-index: 99;
                            /*position the autocomplete items to be the same width as the container:*/
                            top: 100%;
                            left: 0;
                            right: 0;
                        }

                            .autocomplete-items div {
                                padding: 10px;
                                cursor: pointer;
                                background-color: #fff;
                                border-bottom: 1px solid #d4d4d4;
                            }

                                /*when hovering an item:*/
                                .autocomplete-items div:hover {
                                    background-color: #e9e9e9;
                                }

                        /*when navigating through the items using the arrow keys:*/
                        .autocomplete-active {
                            background-color: DodgerBlue !important;
                            color: #ffffff;
                        }
                        /* control AutoComplete */

                    </style>

                </form>
            </div>

        </div>
    </div>

</div>


<!--Grilla tipo lista-->
<div on-scroll="scrollHdlr($direct,$event)" id="resultsGridSearchBox" style="display:none">

    <div class="resultsGrid" ng-repeat="result in Search.SearchResults  track by $index" ng-class-odd="'alt'">
        <div class="row" style="margin-left:0; font-size:12px;">
            <div class="col-xs-7 col-sm-2 photo">
                <img ng-if="result.THUMB!=null" class="document-photo" style="right:0" ng-src="data:image/jpeg;base64,{{result.THUMB}}" />
                <img ng-if="result.ThumbImg!=null" class="document-photo" style="right:0" ng-src="{{result.ThumbImg}}" />
                <img ng-if="result.THUMB==null && result.ThumbImg==null" class="document-photo" style="right:0" ng-src=".../../Content/images/icons/{{result.ICON_ID}}.png" />
            </div>
            <div class="col-xs-10 details">
                <div class="row" ng-click="Opentask($index); HideGBModal($event, $index);" style="padding:0;">
                    <div class="col-xs-12" style="padding:0;">
                        <span class="document-name">
                            <span class="ngtitle" title="Ver tarea: {{result.Tarea}}" data-placement="right" data-toggle="tooltip" style="line-height:1;display:inline-block;">{{result.Tarea}}</span>
                        </span>
                    </div>
                </div>
                <div class="row" ng-click="Opentask($index); HideGBModal($event, $index);" style="padding:0;">
                    <div class="col-xs-9" style="padding:0;">
                        <span class="document-entity ngtitle" title="Indice: {{result.Entidad}}" data-placement="right" data-toggle="tooltip" style="font-weight: bolder;line-height: 12px;    display: inline-block;">{{result.Entidad}}</span>
                    </div>
                    <div class="col-xs-3">
                        <a class="document-index ngtitle" title="Más info" data-toggle="tooltip" data-placement="right" ng-click="ShowIndexs($index)">Ver más Info</a>
                    </div>
                </div>
                <div class="row">
                    <div>
                        <div class="col-xs-3">
                            <div class="row">
                                <span class="glyphicon glyphicon-user glypResult"> </span>
                                <span class="document-dates ngtitle" data-placement="right" data-toggle="tooltip" title="Asignado: {{result.AsignedTo}}">{{result.AsignedTo}}</span>
                            </div>
                            <div class="row">
                                <!--ng-if="result.State!=''">-->
                                <span class="glypResult glyphicon glyphicon-tasks glypResult"> </span>
                                <span class="document-dates ngtitle" data-placement="right" data-toggle="tooltip" title="Etapa: {{result.Step}}">{{result.Step}} <span ng-if="result.State!='' && result.State!=undefined && result.State!=null">({{result.State}})</span></span>
                            </div>
                        </div>
                        <div class="col-xs-3">
                            <div class="row">
                                <span class="glyphicon glyphicon-time glypResult" ng-if="result.Creado!=null"> </span>
                                <span class="document-dates ngtitle" data-placement="left" data-toggle="tooltip" title="Fecha de Creacion: {{result.Creado | date:'dd/MM/yyyy'}}">{{result.Creado  | date:'dd/MM/yyyy'}}</span>
                            </div>
                            <div class="row">
                                <span class="glyphicon glyphicon-edit glypResult" ng-if="result.Modificado!=null"> </span>
                                <span class="document-dates ngtitle" data-placement="left" data-toggle="tooltip" title="Ultima modificacion: {{result.Modificado | date:'dd/MM/yyyy'}}">{{result.Modificado | date:'dd/MM/yyyy'}}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="multipleSelectionMenu" class="multipleSelectionMenu" style="display:none; border-radius:20%">
    <div class="icon-bar icon-bar-Grid" style="border-radius: 6px;">
        <a class="activeButtonIconBar hoverRemoved" ng-click="resetMultipleSelection()">
            Modo Selección
            <span class="glyphicon glyphicon-remove"></span>
        </a>

        <a ng-if="ShowSendMailByResults" class="glyphicon glyphicon-envelope envelopeStyle hoverRemoved" data-toggle="modal" data-target="#ModalSendZip" ng-click="SendEmailFromThumbsGrid()" style="text-decoration:none;" title="Enviar Mail">
        </a>

        <!--<a class="glyphicon glyphicon-option-vertical verticalOptionStyle hoverRemoved" title="Opciones" ng-click="optionClick()" style="text-decoration:none;">
        </a>-->


    </div>
</div>

<!--Vista thumbs-->




<div on-scroll="scrollHdlr($direct,$event)" id="resultsGridSearchBoxThumbs" style="display:none">
    <div class="row">
        <div class="col-6">
            <div id="Kgrid">
                <div class="resultsGrid img-thumbnail " ng-repeat="result in Search.SearchResults  track by $index" style=" max-width:150px; display:inline-block; margin:0.5%; position: relative; font-size: 12px;">

                    <!--<span ng-show="result.USER_ASIGNED == Search.UserId && result.LEIDO == 0" title="No Leido" class="fa fa-exclamation notReadIcon"></span>-->
                    <span ng-show="result.ShowUnread!='false' &&  result.ShowUnread!=false" title="No Leido" class="fa fa-eye-slash unreadEyeIcon"></span>
                    <span class="ngtitle document-name" title="Ver tarea: {{result.Name}}" data-placement="bottom" data-toggle="tooltip">
                        <span class="ngtitle" title="Ver tarea: {{result.Name}}" data-placement="top" data-toggle="tooltip" style="line-height:1;display:inline-block;">{{result.Tarea}}</span>
                    </span>

                    <div class="photo">

                        <!--Si no hay thumbs muestra icono-->
                        <img style="max-height: 225px; " ng-if="result.THUMB==null && result.ThumbImg==null" ng-click="Opentask($index);HideGBModal($event, $index);" class="document-photo-thumbs" ng-src="../../Content/images/icons/{{result.ICON_ID}}.png" />

                        <!--Thumb de la base-->
                        <img style="max-height:225px; height:0" ng-if="result.THUMB!==null" ng-click="Opentask($index);HideGBModal($event, $index);" class="document-photo-thumbs" ng-src="data:image/jpeg;base64,{{result.THUMB}}" />

                        <!--Thumb en FileSystem-->
                        <img style="max-height: 225px; height:0" ng-if="result.ThumbImg!==null && result.THUMB==null" ng-click="Opentask($index);HideGBModal($event, $index);" class="document-photo-thumbs" ng-src="{{result.ThumbImg}}" />

                        <!--Botones thumb-->
                        <div id="btnDetailsContainer">
                            <span title="Más info" class="glyphicon glyphicon-info-sign" onclick="ShowThumbInfoGS(this);"></span>
                            <span title="Agrandar" mode="normal" class="glyphicon glyphicon-zoom-in" onclick="thumbZoom(this);"></span>
                            <span class="glyphicon glyphicon-ok-circle" ng-click="showSeletionModeByCkeck($event, $index);"></span>
                        </div>

                    </div>

                    <div id="ShowThumbDetails" style="display:none;padding: 5%;">
                        <hr style="margin:0" />
                        <div ng-click="Opentask($index);HideGBModal($event, $index);">
                            <div>
                                <span class="document-name-details">
                                    <span style="display:inline-block;">{{result.Tarea}}</span>
                                </span>
                            </div>
                            <div>
                                <span class="document-entity ngtitle" title="Indice: {{result.Entidad}}" data-placement="top" data-toggle="tooltip" style="font-weight: bolder;line-height: 12px;    display: inline-block;">{{result.Entidad}}</span>
                            </div>
                            <div>
                                <a class="document-index ngtitle" title="Más info" data-placement="top" data-toggle="tooltip" ng-click="ShowIndexs($index)" onclick="$('#searchResultModalGS').modal().draggable();">Ver más info</a>
                            </div>
                            <div>
                                <ul style="list-style-type: none; ">
                                    <li>
                                        <span class="glyphicon glyphicon-user glypResult"> </span>
                                        <span class="document-dates ngtitle" data-placement="top" data-toggle="tooltip" title="Asignado: {{result.AsignedTo}}">{{result.AsignedTo}}</span>
                                    </li>
                                    <li>
                                        <span class="glyphicon glyphicon-time glypResult" ng-if="result.Creado!=null"> </span>
                                        <span class="document-dates ngtitle" data-placement="top" data-toggle="tooltip" title="Fecha de Creacion: {{result.Creado | date:'dd/MM/yyyy'}}">{{result.Creado  | date:'dd/MM/yyyy'}}</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div>
                            <div>
                                <div>
                                    <div>
                                        <ul style="list-style-type: none;">
                                            <li>
                                                <span class="glypResult glyphicon glyphicon-tasks glypResult"> </span>
                                                <span class="document-dates ngtitle" data-placement="top" data-toggle="tooltip" title="Etapa: {{result.Step}}">{{result.Step}} <span ng-if="result.State!='' && result.State!=undefined && result.State!=null">({{result.State}})</span></span>
                                            </li>
                                            <li>
                                                <span class="glyphicon glyphicon-edit glypResult" ng-if="result.Modificado!=null"> </span>
                                                <span class="document-dates ngtitle" data-placement="top" data-toggle="tooltip" title="Ultima modificacion: {{result.Modificado | date:'dd/MM/yyyy'}}">{{result.Modificado | date:'dd/MM/yyyy'}}</span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <div class="col-6">
            <div id="PreviewThumbs" ng-show="PreviewMode != 'noPreview'">
                <iframe id="IFPreviewThumbs" src="" height="100%" width="100%" allow="fullscreen"></iframe>
                <img src="../../Content/Images/errorPreview.png" height="100%" width="100%" allow="fullscreen" />
            </div>
        </div>
    </div>
</div>



<!--Vista preview-->
<div id="resultsGridSearchBoxPreview" class="row">
    <!--style="display:none"-->
    <div class="col-xs-12 col-md-10" style="height:100%">
        <div class="row" style="height:100%">
            <center>
                <div id="DocumentViewerFromSearch" style="height: auto; display: none" ng-controller="DocumentViewerController">
                    <zamba-document-viewer class="iframeClassPDF" preview="true" openFirstDoc_onResultsGrid="true" onlyMsg="true" id="DocumentViewerIFrame"></zamba-document-viewer>
                </div>
                <div id="previewDocSearchPanel" style="height: 100%; display: none;">
                    <iframe id="previewDocSearch" style="width: 100%; height: 99% !important" src="../../NGTemplates/PDFViewer/viewer.html"></iframe>
                </div>
            </center>
            <!--<iframe id="previewDocSearch" style="height: 600px; width: 100%; display:none"  src="../../NGTemplates/PDFViewer/viewer.html"></iframe>-->
            <!--<iframe id="previewDocSearch" style="height: 100%; width: 100%;" src="../../NGTemplates/PDFViewer/viewer.html"></iframe>-->
        </div>
    </div>
    <div id="multipleSelectionPreview" style="display:none">
        <div class="icon-bar icon-bar-Grid-preview" style="border-radius: 6px;">
            <a class="activeButtonIconBar hoverRemoved hoverRemoved" ng-click="resetMultipleSelectionPreview()">
                Modo Selección
                <span class="glyphicon glyphicon-remove"></span>
            </a>
            <a ng-if="ShowSendMailByResults" class="glyphicon glyphicon-envelope envelopeStyle hoverRemoved" data-toggle="modal" data-target="#ModalSendZip" ng-click="SendEmailFromThumbsGrid()" style="text-decoration:none;" title="Enviar Mail">
            </a>
        </div>
    </div>
    <div on-scroll="scrollHdlr($direct,$event)" class="col-md-2 previewListItems hidden-xs" style="height:100%">
        <div class="resultsGrid" ng-repeat="result in Search.SearchResults  track by $index" ng-class="{'resultsGridActive': result.NGSelectedRow}" style="display:inline-block; padding-bottom:0; margin-bottom: 10px; position:relative;">

            <!--<span ng-show="result.USER_ASIGNED == Search.UserId && result.LEIDO == 0" title="No Leido" class="fa fa-exclamation notReadIconPreview"></span>-->
            <span ng-show="result.ShowUnread!='false' &&  result.ShowUnread!=false" title="No Leido" class="fa fa-eye-slash unreadEyePreviewIcon"></span>

            <div style="margin-left:0; font-size: 12px;">

                <div class="">

                    <div class="photo">
                        <!--<img ng-if="result.THUMB==null && result.ThumbImg==null" ng-click="previewItem_ForDocumentViewer(result, $index, $event)" class="document-photo-thumbs" ng-src="../../Content/{{result.Icon}}" />-->
                        <img ng-if="result.THUMB==null && result.ThumbImg==null" ng-click="previewItem(result, $index, $event)" class="document-photo-thumbs" ng-src="../../Content/images/icons/{{result.ICON_ID}}.png" />

                        <img ng-if="result.THUMB!=null" ng-click="previewItem(result, $index,$event)" class="document-photo-thumbs" ng-src="data:image/jpeg;base64,{{result.THUMB}}" style="height:0" />

                        <img ng-if="result.ThumbImg!==null && result.THUMB==null" ng-click="previewItem(result, $index,$event)" class="document-photo-thumbs" ng-src="{{result.ThumbImg}}" style="height:0" />

                        <div id="btnDetailsContainerPreview">
                            <span ng-if="ShowDownloadFileBtnPreview == true" mode="normal" data-placement="bottom" data-toggle="tooltip" class="glyphicon glyphicon-download ngtitle" style="font-size:25px" title="Descargar Archivo" ng-click="DownloadFile($index)"></span>
                            <span class="glyphicon glyphicon-new-window ngtitle" data-placement="bottom" data-toggle="tooltip" style="font-size:25px" title="Abrir tarea" ng-click="Opentask($index)"></span>
                            <span class="glyphicon glyphicon-ok-circle ngtitle" data-placement="bottom" data-toggle="tooltip" style="font-size:25px" ng-click="showSeletionModeByPreview($event, $index);" title="Modo selección"></span>
                        </div>

                        <div onclick="ShowThumbInfoGS(this);" class="ngtitle" title="Ver informacion" data-placement="bottom" data-toggle="tooltip" style="margin-top: 5px;display:flex;width: 100%;">
                            <span class="glyphicon glyphicon-info-sign" style="font-size:20px;top:-4px;">
                            </span>
                            <span class="document-name-preview">
                                {{result.Tarea}}
                            </span>
                        </div>

                    </div>

                    <div id="ShowThumbDetails" style="display:none;padding: 5%;">
                        <div ng-click="HideGBModal($event, $index);">
                            <!--ng-click="Opentask($index)"-->
                            <div>
                                <span class="document-name-details">
                                    <span style="display:inline-block;">{{result.Tarea}}</span>
                                </span>
                            </div>

                            <div>
                                <span class="document-entity ngtitle" title="Indice: {{result.Entidad}}" data-placement="top" data-toggle="tooltip" style="font-weight: bolder;line-height: 12px;    display: inline-block;">{{result.Entidad}}</span>
                            </div>
                            <div>
                                <a class="document-index ngtitle" title="Más info" data-placement="top" data-toggle="tooltip" ng-click="ShowIndexs($index)" onclick="$('#searchResultModalGS').modal().draggable();">Ver más info</a>
                            </div>
                            <div>
                                <ul style="list-style-type: none; ">
                                    <li>
                                        <span class="glyphicon glyphicon-user glypResult"> </span>
                                        <span class="document-dates ngtitle" data-placement="top" data-toggle="tooltip" title="Asignado: {{result.AsignedTo}}">{{result.AsignedTo}}</span>
                                    </li>
                                    <li>
                                        <span class="glyphicon glyphicon-time glypResult" ng-if="result.Creado!=null"> </span>
                                        <span class="document-dates ngtitle" data-placement="top" data-toggle="tooltip" title="Fecha de Creacion: {{result.Creado | date:'dd/MM/yyyy'}}">{{result.Creado  | date:'dd/MM/yyyy'}}</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div>
                            <div>
                                <div>
                                    <div>
                                        <ul style="list-style-type: none;">
                                            <li>
                                                <span class="glypResult glyphicon glyphicon-tasks glypResult"> </span>
                                                <span class="document-dates ngtitle" data-placement="top" data-toggle="tooltip" title="Etapa: {{result.Step}}">{{result.Step}} <span ng-if="result.State!='' && result.State!=undefined && result.State!=null">({{result.State}})</span></span>
                                            </li>
                                            <li>
                                                <span class="glyphicon glyphicon-edit glypResult" ng-if="result.Modificado!=null"> </span>
                                                <span class="document-dates ngtitle" data-placement="top" data-toggle="tooltip" title="Ultima modificacion: {{result.Modificado | date:'dd/MM/yyyy'}}">{{result.Modificado | date:'dd/MM/yyyy'}}</span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

            </div>

        </div>

    </div>
</div>

<div id="back-to-top" title="Ir arriba" data-placement="left" data-toggle="tooltip">
    <button type="button" class="btn btn-danger"><span class="glyphicon glyphicon-chevron-up"></span></button>
</div>

<div class="modal fade" id="searchResultModalGS" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header" style="padding:10px;">
                <h4 class="modal-title" id="myModalSRLabel" style="float:left;">{{Result.Tarea}}</h4>
                <button type="button" class="btn btn-default" style="float:right;" data-dismiss="modal">Cerrar</button>
            </div>
            <div class="modal-body" style="padding:0;">
                <div class="col-xs-10">
                    <ul>
                        <li style="list-style: none;" ng-repeat="index in Result.Indexs" ng-show="index.Data != ''">
                            <p style="margin-bottom: 0;">
                                <b>{{index.Name}}</b>:  <span ng-show="index.dataDescription != ''">{{index.dataDescription}}</span>
                                <span ng-show="index.dataDescription == ''">{{index.Data}}</span>
                            </p>
                        </li>
                    </ul>
                    <div ng-if="Result.NoIndex.length>0" class="noIndex">{{Result.NoIndex}}</div>
                </div>
            </div>
            <div class="modal-footer" style="padding:5px;">
            </div>
        </div>
    </div>
</div>
<!-- Trigger the modal with a button -->
<!-- Modal -->
<div class="modal fade" id="ModalDerivar" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 id="lblDerivar" class="modal-title text-center">Derivar</h4>
            </div>
            <div class="col-md-12 TamaDiv">
                <div class="col-md-6">
                    <h4 class="text-center">Usuarios</h4>
                    <input type="text" id="SearchUsers" class="form-control" placeholder="Buscar Usuarios" autocomplete="off">
                    <br />

                    <div class="list-group Users ScrollDiv">
                    </div>
                </div>
                <div class="col-md-6">
                    <h4 class="text-center">Grupos</h4>
                    <input type="text" id="SearchGoups" class="form-control" placeholder="Buscar Grupos" autocomplete="off">
                    <br />
                    <div class="list-group Groups ScrollDiv">
                    </div>
                </div>
            </div>
            <div class="modal-footer" style=" padding: 7px">
                <span class="loadersmall" style="display: none"></span>
                <h4 class="modal-title text-center">Observaciones</h4>
                <textarea rows="5" id="deriveMessage" class="form-control TextAreaDerivar" placeholder="Mensaje a enviar..."></textarea>
                <button type="button" class="btn btn-primary derive" ng-click="DeriveTasks();">Derivar</button>
                <button type="button" class="btn btn-primary closeModal" data-dismiss="modal">Cancelar</button>
            </div>
        </div>
    </div>



</div>
<script>
    const fileInput = document.querySelector('#file_upload');
    var CollectionFiles = [];

    fileInput.addEventListener('change', (e) => {
        CollectionFiles = []

        let files = e.target.files;
        let reader = new FileReader();
        let file;

        for (let i = 0; i < files.length; i++) {
            (function (file) {
                var reader = new FileReader();
                reader.onload = (file) => {
                    CollectionFiles.push({ "FileName": files[i].name, "Base64": reader.result.replace('data:', '').replace(/^.+,/, '').toString() });
                }
                reader.readAsDataURL(file)
            })(files[i]);
        }

    });

    $(document).ready(function () {
        CKEDITOR.replace('cuerpoMensaje');

        if (document.getElementById('cuerpoMensajeZip') != null)
            CKEDITOR.replace('cuerpoMensajeZip');
        
        $("#SearchUsers").on("keyup", function () {
            var value = $(this).val().toLowerCase();
            $(".Users a").filter(function () {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            });
        });

        $("#SearchGoups").on("keyup", function () {
            var value = $(this).val().toLowerCase();
            $(".Groups a").filter(function () {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            });
        });
        $('.slider').tooltip({ title: "Seleccion", placement: "right" });

        $(".slider.round").each(function () {
            $(this).on("click", function () {
                var scope_taskController = angular.element($("#taskController")).scope();
                window.localStorage.setItem("AR|" + GetUID(), JSON.stringify(scope_taskController.getResultsGridActions()));
            });
        });

        $('#OpenAllSelected').css('display', 'inline');

        if (document.getElementById("BtnSendEmail") != undefined)
            $('#BtnSendEmail').css('display', 'inline');

        if (document.getElementById("BtnSendZip") != undefined)
            $('#BtnSendZip').css('display', 'inline');

        if (document.getElementById("BtnDownloadZip") != undefined)
            $('#BtnDownloadZip').css('display', 'inline');
        // $('#BtnClearCheckbox').css('display', 'inline');

        $('.button-checkbox').each(function () {
            var $widget = $(this),
                $button = $widget.find('button'),
                $checkbox = $widget.find('input:checkbox'),
                color = $button.data('color'),
                settings = {
                    on: {
                        icon: 'fa fa-check'
                    },
                    off: {
                        icon: 'fa fa-square-o'
                    }
                };

            //$button.on('click', function () {
            //    $checkbox.prop('checked', !$checkbox.is(':checked'));
            //    $checkbox.triggerHandler('change');
            //    updateDisplay($checkbox);
            //});

            $checkbox.on('change', function () {
                updateDisplay($checkbox);
            });

            function updateDisplay() {
                try {
                    var isChecked = $checkbox.is(':checked');
                    // Set the button's state
                    $button.data('state', (isChecked) ? "on" : "off");

                    // Set the button's icon
                    $button.find('.state-icon')
                        .removeClass()
                        .addClass('state-icon ' + settings[$button.data('state')].icon);

                    // Update the button's color
                    if (isChecked) {
                        $button
                            .removeClass('md-btn-basic')
                            .addClass('md-btn-' + color + ' active');
                    }
                    else {
                        $button
                            .removeClass('md-btn-' + color + ' active')
                            .addClass('md-btn-basic');
                    }

                } catch (e) {
                    console.error(e);
                }
            }

            function init() {
                updateDisplay();
                // Inject the icon if applicable
                if ($button.find('.state-icon').length == 0) {
                    $button.prepend('<i class="state-icon ' + settings[$button.data('state')].icon + '"></i> ');
                }
            }
            init();
        });

    });


    window.addEventListener('load', () => {
        setTimeout(function () {
            let toolBarKendogrid = document.querySelectorAll(".ToolbarKendoGridBtn");

            toolBarKendogrid.forEach(function (item) {
                item.classList.remove("ToolbarKendoGridBtn");
            });
        }, 5000);
    });

    function togglePasswordVisibility() {
        const password = document.getElementById("TxtPassword");
        const type = password.getAttribute("type") === "password" ? "text" : "password";
        password.setAttribute("type", type);

        // toggle the icon
        this.classList.toggle("bi-eye");
    }

    function togglePasswordVisibility() {
        const password = document.getElementById("TxtPassword");
        const type = password.getAttribute("type") === "password" ? "text" : "password";
        password.setAttribute("type", type);

        // toggle the icon
        this.classList.toggle("bi-eye");
    }

    function RefreshCurrentResults() {
        var scope_entitieController = angular.element($("#VisualButtonsBar")).scope();
        scope_entitieController.RefreshCurrentResults();
    }
    //function validateMail(destinatario) {
    //    //Creamos un objeto
    //    object = document.getElementById(destinatario);
    //    valueForm = object.value;

    //    // Patron para el correo
    //    var patron = /([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)/;
    //    if (valueForm.search(patron) == 0) {
    //        //Mail correcto

    //        object.style.color = "#000";
    //        return;
    //    }
    //    //Mail incorrecto
    //    object.style.color = "#f00";
    //}

    //function validateMailCC(cc) {
    //    //Creamos un objeto
    //    object = document.getElementById(cc);
    //    valueForm = object.value;

    //    // Patron para el correo
    //    var patron = /([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)/;
    //    if (valueForm.search(patron) == 0) {
    //        //Mail correcto

    //        object.style.color = "#000";
    //        return;
    //    }
    //    //Mail incorrecto
    //    object.style.color = "#f00";
    //}

    //function validateMailCCO(cco) {
    //    //Creamos un objeto
    //    object = document.getElementById(cco);
    //    valueForm = object.value;

    //    // Patron para el correo
    //    var patron = /([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)/;
    //    if (valueForm.search(patron) == 0) {
    //        //Mail correcto

    //        object.style.color = "#000";
    //        return;
    //    }
    //    //Mail incorrecto
    //    object.style.color = "#f00";
    //}
    //$('#btnMailZipSubmit').click(function () {

    //    expr = /([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)/;
    //    if (!expr.test(email))
    //        toastr.error("Error: La dirección de correo " + email + " es incorrecta.");
    //});

    $('#btnMailZipSubmit').click(function () {
        var d = document.getElementById("destinatario").value;
        var cc = document.getElementById("cc").value;
        var cco = document.getElementById("cco").value;

        var expr = /([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)/;

        //if (!expr.test(d))
        //    toastr.error("Error: La dirección de correo es incorrecta.");

        //if (cc != "") {
        //    if (!expr.test(cc))
        //        toastr.error("Error: La dirección de correo CC es incorrecta.");
        //}

        //if (!expr.test($('#cc').val()))
        //    toastr.error("Error: La dirección de correo CC es incorrecta.");

        //if (cco != "") {
        //    if (!expr.test(cco))
        //        toastr.error("Error: La dirección de correo CCO es incorrecta.");
        //}
        //else {
        //    toastr.error("wawaw.");
        //}


    });

    function viewBarJS(sender) {
        //var ReportId = sender.id;
        var User = getElementFromQueryString("User");
        window.open('https://bpm.provinciaseguros.com.ar/zamba.dash/#/dashboard?User=' + User + '', "_blank");
    }

    function GetGroups1() {
        $(".Groups").empty();
        var eia = window.localStorage.getItem('TaskFilterConfig-' + GetUID());
        var eia = JSON.parse(eia);
        var stepId = eia.UserId;

        var data;
        if (window.localStorage) {
            var localUserGroupsByStepId = window.localStorage.getItem('localUserGroupsByStepId' + stepId);
            if (localUserGroupsByStepId != undefined && localUserGroupsByStepId != null && localUserGroupsByStepId != "null") {
                try {
                    data = JSON.parse(localUserGroupsByStepId);

                } catch (e) {
                    console.error(e);
                    data = LoadlocalUserGroupsByStepIdFromDB1(stepId);
                }
            }
            else {
                data = LoadlocalUserGroupsByStepIdFromDB1(stepId);
            }
        }
        else {
            data = LoadlocalUserGroupsByStepIdFromDB1(stepId);
        }
        if (data != undefined && data != null) {
            for (var i = 0; i < data.length; i++) {
                if (data[i] !== null && data[i] !== undefined) {
                    $(".Groups").append('<a onclick="selectUserItem1(this)" href="#" data-userId="' + data[i]._id + '" class="list-group-item GruposUsuarios"> ' + data[i]._name + '</a>')
                }
            }
        }
    }

    function OpenModalActionsRules() {
        $("#ModalActions").modal();
    }

    function LoadlocalUserGroupsByStepIdFromDB1(stepId) {
        var serviceBase = ZambaWebRestApiURL;
        try {
            if (stepId > 0) {
                $.ajax({
                    type: "POST",
                    url: serviceBase + '/Tasks/GetGroups?stepId=' + stepId,
                    contentType: "application/json; charset=utf-8",
                    success: function (data) {
                        if (window.localStorage) {
                            try {

                                window.localStorage.setItem('localUserGroupsByStepId' + stepId, JSON.stringify(data));
                            } catch (e) {
                                console.error(e);
                            }
                            if (data != undefined) {
                                for (var i = 0; i < data.length; i++) {
                                    if (data[i] !== null && data[i] !== undefined) {
                                        $(".Groups").append('<a onclick="selectUserItem1(this)" href="#" data-userId="' + data[i]._id + '" class="list-group-item GruposUsuarios"> ' + data[i]._name + '</a>')
                                    }
                                }
                            }
                        }
                        return data;
                    }
                });
            }
        } catch (e) {
            console.error(e);
        }
    }

    function GetUsers1() {
        $(".Users").empty();
        var eia = window.localStorage.getItem('TaskFilterConfig-' + GetUID());
        var eia = JSON.parse(eia);
        var stepId = eia.UserId;

        var data;
        if (window.localStorage) {
            var localUsersByStepId = window.localStorage.getItem('localUsersByStepId' + stepId);
            if (localUsersByStepId != undefined && localUsersByStepId != null && localUsersByStepId != "null") {
                try {
                    data = JSON.parse(localUsersByStepId);

                } catch (e) {
                    console.error(e);
                    data = LoadlocalUsersByStepIdFromDB1(stepId);
                }
            }
            else {
                data = LoadlocalUsersByStepIdFromDB1(stepId);
            }
        }
        else {
            data = LoadlocalUsersByStepIdFromDB1(stepId);
        }

        for (var i = 0; i < data.length; i++) {
            if (data[i] !== null && data[i] !== undefined) {
                $(".Users").append('<a onclick="selectUserItem1(this)" href="#" data-userId="' + data[i]._id + '" class="list-group-item GruposUsuarios"> '
                    + data[i]._name + '</a>')
            }
        }

    }
    function LoadlocalUsersByStepIdFromDB1(stepId) {
        var serviceBase = ZambaWebRestApiURL;
        $.ajax({
            type: "POST",
            url: serviceBase + '/Tasks/GetUsers?stepId=' + stepId,
            async: false,
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                var retData = data
                if (data != null) {
                    if (window.localStorage) {
                        try {
                            window.localStorage.setItem('localUsersByStepId' + stepId, JSON.stringify(data));
                        } catch (e) {
                            console.error(e);
                        }

                        for (var i = 0; i < data.length; i++) {
                            if (data[i] !== null && data[i] !== undefined) {
                                $(".Users").append('<a onclick="selectUserItem1(this)" href="#" data-userId="' + data[i]._id + '" class="list-group-item GruposUsuarios"> '
                                    + data[i]._name + '</a>')
                            }
                        }
                        GetGroups1();
                    }
                }
                return retData;
            }
        });
    };
    function selectUserItem1(_this) {
        if ($(_this).hasClass("selectedUser")) {
            $(_this).removeClass("selectedUser");
        }
        else {
            $(".selectedUser").removeClass("selectedUser");
            $(_this).addClass("selectedUser");
        }

        var lblderivar = "Derivar a ";
        lblderivar += $(_this)[0].text;
        $('#lblDerivar')[0].textContent = lblderivar;
    };

    function tempo() {
        var a = $("[ng-click='previewItem_ForDocumentViewer(result, $index, $event)']")[0];
        if (a != undefined && $($("[ng-click='previewItem_ForDocumentViewer(result, $index, $event)']")[0]).hasClass("SelectedDocumentClass") == false) {
            $($("[ng-click='previewItem_ForDocumentViewer(result, $index, $event)']")[0]).addClass("SelectedDocumentClass");
            a.click();

        }

    }


    setTimeout(function () { tempo() }, 5000)




</script>


<style>
    /*sobreescribe estilo del ui-select*/

    #assignedlblfilter {
        /* padding: 0px; */
        margin-right: -5px;
        display: inline-block;
        width: 78px;
        height: 26px;
        font-size: 11px;
        margin-bottom: 16px;
    }


    #steplblfilter {
        /* padding: 0px; */
        margin-right: -5px;
        display: inline-block;
        width: 78px;
        height: 26px;
        font-size: 11px;
        margin-bottom: 16px;
    }

    .btn.btn-default.form-control.ui-select-toggle {
        height: 26px !important;
        font-size: 11px !important;
        margin-top: -14px !important;
    }

    .ui-select-container {
        max-width: 180px !important;
    }

    .ui-select-choices-group {
        font-size: 11px;
    }

    #btnclear {
        min-width: 0px;
        min-height: 0px;
        margin-left: 0px;
        margin-right: 0px;
        margin-bottom: 0px;
        padding-left: 0px;
        padding-right: 0px;
    }

    .no-margin-no-padding {
        min-width: 0px;
        min-height: 0px;
        margin-left: 0px;
        margin-right: 0px;
        margin-bottom: 0px;
        padding-left: 0px;
        padding-right: 0px;
    }


    .btnFilterButtons {
        margin-top: 0px !important;
    }

    .margin-top-container-filter {
        padding-left: 0px;
    }

    .margin-top-created-filter {
        /* margin-top: 10px !important;*/
    }

    .margin-top-icons {
        margin-top: 13px !important
    }

    .form-control-filter {
        width: 257px !important;
        min-width: 257px !important;
        margin: 0px !important;
    }

    .input-group-filter {
        display: inline-block !important;
        /*  margin-left: -12px !important;
        padding-right: 25px !important;*/
    }


    .margin-left-input-filter {
        display: inline-block !important;
        margin-left: -2px !important;
    }

    .flex-container-2 {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        height: 35px !important;
        width: 2000px;
        align-content: start;
        margin-left: 0px !important;
        margin-top: -6px
    }

    .cajas {
        width: 100px;
        height: 100px;
        background-color: pink;
        border: 1px solid black;
        margin-top: 10px;
    }

    .flex-container {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        height: 300px;
        overflow: auto;
        align-content: flex-start;
    }

    .divider-item {
        width: 10px;
        display: inline-block;
        margin-top: 0px;
        margin-bottom: 0px;
    }

    #items-filter-panel {
        height: 97px;
        background-color: white;
        margin-top: 0px;
        padding-top: 0px;
    }

    #user-assigned-control {
        display: inline-block;
        margin-left: 0px;
        margin-right: 10px;
        margin-bottom: -20px;
    }

    #step-control {
        display: inline-block;
        margin-left: 0px;
        margin-right: 9px;
        margin-bottom: -20px;
        overflow-x: clip;
    }

    .grid-container {
        display: grid;
        grid-template-columns: auto auto auto;
        grid-template-rows: auto auto;
        grid-gap: 10px;
        background-color: #2196F3;
        padding: 10px;
    }

    #test {
        flex-wrap: nowrap;
    }

    .z-wrapper {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
    }

    .selectedBtnBackgound {
        background-color: #337ab7 !important;
    }

    .selectedIconColor {
        color: #337ab7 !important;
    }

    .alignTextIcon {
        margin-top: unset !important;
    }

    #CountFilter {
        color: white;
    }

    #filterControlContainer {
        padding-top: 5px;
    }

    @media only screen and (max-width:1450px ) {
        #previewDocSearch {
            height: 760px;
        }
    }

    .btnborder {
        border: 0;
    }

    .mt-filter {
        margin-top: 2px;
    }

    /*#previewDocSearch {
        height: 810px;
    }*/

    /*AngularJs Multiselect*/
    .select2 > .select2-choice.ui-select-match {
        /* Because of the inclusion of Bootstrap */
        height: 29px;
    }

    .selectize-control > .selectize-dropdown {
        top: 36px;
    }

    #ui-multiselect .ui-select-container {
        display: inline-block !important;
        width: 300px !important;
        top: 4px !important;
    }

    #ui-multiselect input.form-control.ui-select-search {
        width: 180px !important;
        font-size: 11px !important;
        height: 26px !important;
        margin-bottom: 3px !important;
    }

    #ui-multiselect .ui-select-choices.ui-select-choices-content.ui-select-dropdown.dropdown-menu {
        overflow: scroll !important;
        max-height: 85px !important;
    }

    #ui-multiselect .btn.btn-default.form-control.ui-select-toggle {
        width: 100% !important;
    }


    .SpanFiltro {
        background: #61bd4f;
        border-radius: 0 3px 3px 0;
        color: #fff;
        position: absolute;
        padding-left: 6px;
        padding-right: 6px;
    }

    .EstiloFiltro {
        color: #fff;
        font-size: 14px;
        position: relative;
        text-decoration: none;
    }

        .EstiloFiltro:focus, .EstiloFiltro:hover {
            color: #fff !important;
        }

    .ScrollDiv {
        overflow: auto;
        height: 206px !important;
    }
    /* Page Template for the exported PDF */
    .page-template {
        font-family: "DejaVu Sans", "Arial", sans-serif;
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
    }

        .page-template .header {
            position: absolute;
            top: 30px;
            left: 30px;
            right: 30px;
            border-bottom: 1px solid #888;
            color: #888;
        }

        .page-template .footer {
            position: absolute;
            bottom: 30px;
            left: 30px;
            right: 30px;
            border-top: 1px solid #888;
            text-align: center;
            color: #888;
        }

        .page-template .watermark {
            font-weight: bold;
            font-size: 400%;
            text-align: center;
            margin-top: 30%;
            color: #aaaaaa;
            opacity: 0.1;
            transform: rotate(-35deg) scale(1.7, 1.5);
        }


    kendo-pdf-document .customer-photo {
        border: 1px solid #dedede;
    }

    .customer-name {
        display: inline-block;
        vertical-align: middle;
        line-height: 32px;
        padding-left: 3px;
    }

    /* Apply a minimum width to the tables when scrolling is enabled and nested tables (hierarchy) ARE NOT USED. */

    #GridID .k-grid-header-wrap > table, /* header table */
    #GridID .k-grid-content table, /* data table, no virtual scrolling */
    #GridID .k-virtual-scrollable-wrap table /* data table, with virtual scrolling */ {
        min-width: 800px;
    }

    .notRead {
        font-weight: 900;
    }

    .unreadEyeIcon {
        display: inline-block;
        position: absolute;
        top: 11%;
        right: -4%;
        z-index: 1040;
        font-size: 22px;
        color: #ffffff;
        background: rgb(244 83 67);
        border-radius: 19.5em;
        padding: 0.2em;
    }

    .unreadEyePreviewIcon {
        display: inline-block;
        position: absolute;
        top: 48%;
        left: -1%;
        border-radius: 19.5em;
        padding: 0.2em;
        z-index: 1040;
        font-size: 25px;
        color: #ffffff;
        background: rgb(244 83 67);
        border: 2px solid white;
    }

    .text-rigth {
        text-align: right;
    }

    .buttonColor {
        width: 35px !important;
        height: 35px !important;
        min-width: 20px !important;
        color: var(--ZBlue);
    }

    .buttonMargin {
        margin-left: -6px;
    }

    .buttonTopAlign {
        margin-top: 4.5px;
    }

    #mdBtnFilterStep {
        background-color: #42bd3e !important;
        color: white !important;
    }

    .sendEmailMt {
        margin-top: 4px;
    }
</style>


