
<form editable-form name="tableform" onaftersave="saveTable()" oncancel="cancel()">



    <!-- table -->
    <table class="table table-bordered table-hover table-condensed">
        <tr style="font-weight: bold">
            <th ng-repeat="column in asociatedColumns ">{{column.Name}}</th>
            <!--<th ng-show="!isReadOnly">Acciones</th>-->
            <th ng-show="false">Acciones</th>
        </tr>
        <tr ng-repeat="result in asociatedResults | orderBy : 'data.line'" ng-class="{'selected':indexsSelectedToDelete.includes(result.id) && deleteItems}">
            <!-- view -->
            <td ng-show="isMainView || isEditing" style="width:5%">
                <span editable-text="result.data.line" e-form="tableform">
                    {{ result.data.line || ''}}
                </span>
            </td>
            <td ng-show="isMainView || isEditing" style="width:28%%">
                <span editable-text="result.data.product" e-form="tableform">
                    {{ result.data.product || '' }}
                </span>
            </td>
            <td ng-show="isMainView || isEditing">
                <span editable-text="result.Data.reclaimantName" e-form="tableform">
                    {{ result.data.measure || '' }}
                </span>
            </td>
            <td ng-show="isMainView || isEditing" style="width:5%">
                <span editable-text="result.Data.reclaimantName" e-form="tableform">
                    {{ result.data.quantity || '' }}
                </span>
            </td>
            <td ng-show="isMainView || isEditing">
                <span editable-text="result.Data.reclaimantName" e-form="tableform">
                    {{ result.data.costCenter || '' }}
                </span>
            </td>
            <td ng-show="isMainView || isEditing">
                <span editable-text="result.Data.reclaimantName" e-form="tableform">
                    {{ result.data.delegations || '' }}
                </span>
            </td>
            <td ng-show="isMainView && !isEditing">
                <span editable-text="result.Data.reclaimantName" e-form="tableform">
                    {{ result.data.amountsReceived || '' }}
                </span>
            </td>
            
            <!-- End view -->
            <!-- Edit -->
          
            <td ng-show="isEditing" style="width:5%">
                <input ng-model="result.data.amountsReceived" min="0" type="number" 
                       class="form-control input-sm nospin" />
            </td>
            <!-- End Edit -->
            <td ng-show="false" class="form-group row">
                <div>
                    <button type="button" ng-click="deleteResult(result.id, $index)" class="btn btn-danger fa fa-trash"></button>
                </div>
            </td>
           

        </tr>
        <tr ng-show="isInserting">
            <!-- Insert -->
            <td style="width:5%">
                <input ng-model="result.data.line" ng-disabled="true" class="form-control input-sm" />
            </td>
            <td>
                <div class="dropdown">
                    <input style="min-width: 311px;" class="dropdown-toggle form-control input-sm"
                           ng-init="product = ''"
                           ng-model="product" data-toggle="dropdown">
                    <ul class="dropdown-menu list-group" style="max-height:200px; overflow-x:hidden; overflow-y:scroll; font-size:small; width:450px">
                        <li class="list-group-item" ng-repeat="item in  productFilteredItems = (ProductoAttributeLists | filter:product)"
                            ng-click="setProductParam(item, null)">
                            {{item}}
                        </li>
                        <li class="list-group-item" ng-show="productFilteredItems.length == 0">
                            No hay coincidencias.
                        </li>
                    </ul>
                </div>
            </td>
            <td>
              <select class="form-control input-sm"
                        ng-init="result.data.measure = UnidadAttributeLists[1]"
                        ng-options="item as item for item in UnidadAttributeLists"
                        ng-model="result.data.measure" onshow="$parent.loadAttributeList(attribute.Id)"></select>
            </td>
            <td style="width:5%">
                <input ng-model="result.data.quantity" type="number" min="0" ng-change="setPrice(result)" class="form-control input-sm nospin" />
            </td>
            <td>
                <div class="dropdown">
                    <input class="dropdown-toggle form-control input-sm" ng-model="costCenter" data-toggle="dropdown">
                    <ul class="dropdown-menu list-group" style="max-height:250px; overflow-x:hidden; overflow-y:scroll; font-size: small; width: 250px">
                        <li class="list-group-item" ng-repeat="item in costCenterFilteredItems = (costCenterList | filter:costCenter)"
                            ng-click="setCostCenterParam(item, null)">
                            {{item}}
                        </li>
                        <li class="list-group-item" ng-show="costCenterFilteredItems.length == 0">
                            No hay coincidencias.
                        </li>
                    </ul>
                </div>
            </td>
            <td>
                <div class="dropdown">
                    <input class="dropdown-toggle form-control input-sm" ng-model="delegations" data-toggle="dropdown">
                    <ul class="dropdown-menu list-group" style="max-height:250px; overflow-x:hidden; overflow-y:scroll; font-size: small; width:250px">
                        <li class="list-group-item" ng-repeat="item in delegationsFilteredItems = (delegationsList | filter:delegations)"
                            ng-click="setdelegationsParam(item, null)">
                            {{item}}
                        </li>
                        <li class="list-group-item" ng-show="delegationsFilteredItems.length == 0">
                            No hay coincidencias.
                        </li>
                    </ul>
                </div>
            </td>
            <td ng-show="isEditing" style="width:5%">
                <input ng-model="result.data.amountsReceived" min="0" type="number"
                       class="form-control input-sm nospin" />
            </td>
            <td style="width:5%">
                <button type="button" ng-click="insertResult(result)" class="btn btn-primary glyphicon glyphicon-ok"></button>
            </td>
            <!-- End Insert -->
        </tr>
    </table>
  
    <!-- buttons -->
    <div class="btn-edit" ng-show="!isInserting && !isEditing && !deleteItems">
        <button type="button" ng-show="!firtTime && !isReadOnly" class="btn btn-warning pull-right" style="margin-bottom: 6px" ng-click="EditResultMode()">
            Editar
        </button>
        <button type="button" ng-show="false" ng-click="addResult()" style="margin-left:5px; margin-bottom: 6px" class="btn btn-success pull-right">
            Nuevo
        </button>

    </div>
    <div class="btn-form" ng-show="isInserting || isEditing || deleteItems">
        <button type="button" ng-disabled="tableform.$waiting" ng-click="saveTable()" class="btn btn-primary">Guardar Cambios</button>
        <button type="button" ng-disabled="tableform.$waiting" ng-click="cancelModification(result)" class="btn btn-default">Cancelar Cambios</button>
    </div>
    <style>
        .selected {
            background: #D4CAC7;
            opacity: 0.9;
        }

        ::-webkit-scrollbar-thumb {
            -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);
            background-color: #F5F5F5;
            border-radius: 10px;
        }

        .upload-btn-wrapper {
            position: relative;
            overflow: hidden;
            display: inline-block;
        }



            .upload-btn-wrapper input[type=file] {
                font-size: 100px;
                position: absolute;
                left: 0;
                top: 0;
                opacity: 0;
            }

        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
    </style>

</form>
