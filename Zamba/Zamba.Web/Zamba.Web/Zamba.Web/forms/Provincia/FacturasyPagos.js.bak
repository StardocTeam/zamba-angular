$(document).ready(function () {

    //Establece Puntos millares y coma a los importes traidos del origen.
   // setInputSeparator('zamba_index_109');

    //Renderizacion de valor numerico a importe.
    $("#zamba_index_109").on({
        "focusout": render_Importe,
    });

    CheckImporteMoneda();

    $("#zamba_index_92").on({
        "change": CheckImporteMoneda,
    });

    $("#zamba_index_11535223").on({
        "focusout": CheckImporteMoneda,
    });
    $("#zamba_index_11535222").on({
        "focusout": CheckImporteMoneda,
    });
});


function CheckImporteMoneda() {

    var moneda = $("#zamba_index_92").val();
    var importePesos = $("#zamba_index_109").val();
    var tipoCambio = $("#zamba_index_11535223").val();
    var importeOtraMoneda = $("#zamba_index_11535222").val();

    if (moneda == undefined || moneda == null || moneda == '') {
        $("#zamba_index_11535223").attr('readonly', 'readonly');
        $("#zamba_index_11535222").attr('readonly', 'readonly');
        $("#zamba_index_109").attr('readonly', 'readonly');
        $("#DivImporteOtraMoneda1").hide();
        $("#DivImporteOtraMoneda2").hide();
    }
    else if (moneda != "PES") {
        $("#DivImporteOtraMoneda1").show();
        $("#DivImporteOtraMoneda2").show();

        $("#zamba_index_11535223").removeAttr('readonly', 'readonly');
        $("#zamba_index_11535222").removeAttr('readonly', 'readonly');
     //   $("#zamba_index_109").val('');
        //$("#zamba_index_11535223").attr('display', 'block');
        //$("#zamba_index_11535222").attr('display', 'block');

        //Desabilitamos Importe en Pesos
        $("#zamba_index_109").attr('readonly', 'readonly');
        $("#zamba_index_109").attr('readonly', 'readonly');

        if (tipoCambio != undefined && tipoCambio != null && tipoCambio != '') {
            if (importeOtraMoneda != undefined && importeOtraMoneda != null && importeOtraMoneda != '') {
                importePesos = parseFloat(importeOtraMoneda.replace('.', '').replace(',', '.'), 2) * parseFloat(tipoCambio.replace(',', '.'), 2);
                $("#zamba_index_109").val(new Intl.NumberFormat("es-AR", { style: "decimal", minimumFractionDigits: 2 }).format(importePesos));
            }
            else {
                $("#zamba_index_109").val("0");
                $("#importeError").attr("inneHtml", "Importe en otra moneda obligatorio");
            }
        }
        else {
            if (importeOtraMoneda != undefined && importeOtraMoneda != null && importeOtraMoneda != '') {
            $("#zamba_index_109").val("0");
            $("#importeError").attr("inneHtml", "Tipo de Cambio obligatorio");
             }
             else
            {
            $("#zamba_index_11535222").val((importePesos));
            $("#importeError").attr("inneHtml", "Tipo de Cambio obligatorio");
            }
        }
    }
    else {
        $("#DivImporteOtraMoneda1").hide();
        $("#DivImporteOtraMoneda2").hide();

        $("#zamba_index_11535223").val('');
        $("#zamba_index_11535222").val('');
        $("#zamba_index_11535223").attr('readonly', 'readonly');
        $("#zamba_index_11535222").attr('readonly', 'readonly');
        $("#zamba_index_109").removeAttr("readonly");
        $("#zamba_index_109").removeAttr("readonly");
    }

};




function RemoveNonFacItems() {
    console.log('Removing Items NON Fact');

    $('select[name="zamba_index_110"]').find('option[value=300]').remove();
    $('select[name="zamba_index_110"]').find('option[value=400]').remove();
    $('select[name="zamba_index_110"]').find('option[value=500]').remove();
    $('select[name="zamba_index_110"]').find('option[value=600]').remove();

};


function ValidateRequieredFields(sender) {
    var concepto = $("#zamba_index_2725").val();
    var gasto = $("#zamba_index_110").val();
    var oc = $("#zamba_index_50").val();

    if (concepto != undefined && concepto != '' && gasto != undefined && gasto != '') {
        if (gasto == 100 && (oc == undefined || oc == '')) {
            swal('Datos requeridos', 'Tenes que completar el Nro de Orden de Compra', 'warning');
			return false;
        }
	
    }
    else {
        swal('Datos requeridos', 'Tenes que seleccionar el Tipo de Gasto y Concepto', 'warning');
   return false;
   }
   			
};

